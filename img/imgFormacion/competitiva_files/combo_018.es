YUI.add("hermes-template-sub-photo",(function(t,e){var n=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,n,l,o){var a=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,s=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="sub-photo-container centered-content">\n\t<div class="sub-photo-content-container">\n\t\t'+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-left-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:3,column:2},end:{line:3,column:32}}}))+"\n\t\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-right-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:4,column:2},end:{line:4,column:33}}}))+"\n\t</div>\n\n\t\n\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-keyboard-shortcuts-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:8,column:1},end:{line:8,column:45}}}))+"\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/sub-photo",(function(e,o){return(o=o||{}).partials=o.partials?t.merge(l,o.partials):l,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-left",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t"+n.escapeExpression((a(e,"outlet")||l&&a(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?a(l,"sub-photo-submoola-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:2,column:1},end:{line:2,column:35}}}))+"\n"},3:function(n,l,e,t,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(a=(r(e,"isFlipped")||l&&r(l,"isFlipped")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},"enable-dark-photopage-with-sidebar",{name:"isFlipped",hash:{},fn:n.program(4,o,0),inverse:n.noop,data:o,loc:{start:{line:9,column:1},end:{line:11,column:15}}}))?a:""},4:function(n,l,e,t,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t"+n.escapeExpression((a(e,"outlet")||l&&a(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?a(l,"photo-charm-exif-scrappy-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:10,column:2},end:{line:10,column:42}}}))+"\n"},6:function(n,l,e,t,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t"+n.escapeExpression((a(e,"outlet")||l&&a(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?a(l,"comment-count-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:19,column:1},end:{line:19,column:30}}}))+"\n"},8:function(n,l,e,t,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t"+n.escapeExpression((a(e,"outlet")||l&&a(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?a(l,"sub-photo-liked-by-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:25,column:1},end:{line:25,column:35}}}))+"\n"},10:function(n,l,e,t,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t"+n.escapeExpression((a(e,"outlet")||l&&a(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?a(l,"sub-photo-fave-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:27,column:1},end:{line:27,column:31}}}))+"\n"},12:function(n,l,e,t,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t"+n.escapeExpression((a(e,"outlet")||l&&a(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?a(l,"sub-photo-submoola-banner-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:33,column:1},end:{line:33,column:42}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,o){var a,r=null!=l?l:n.nullContext||{},u=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return(null!=(a=s(e,"if").call(r,null!=l?s(l,"showBannerAd"):l,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?a:"")+"\n"+i((s(e,"outlet")||l&&s(l,"outlet")||u).call(r,null!=l?s(l,"attribution-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:5,column:0},end:{line:5,column:27}}}))+"\n"+i((s(e,"outlet")||l&&s(l,"outlet")||u).call(r,null!=l?s(l,"sub-photo-title-desc-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:6,column:0},end:{line:6,column:36}}}))+"\n\n"+(null!=(a=s(e,"if").call(r,null!=l?s(l,"shouldSeeSidebar"):l,{name:"if",hash:{},fn:n.program(3,o,0),inverse:n.noop,data:o,loc:{start:{line:8,column:0},end:{line:12,column:7}}}))?a:"")+"\n"+(null!=(a=s(e,"unless").call(r,null!=l?s(l,"showBannerAd"):l,{name:"unless",hash:{},fn:n.program(1,o,0),inverse:n.noop,data:o,loc:{start:{line:14,column:0},end:{line:16,column:11}}}))?a:"")+"\n"+(null!=(a=s(e,"if").call(r,null!=l?s(l,"shouldSeeSidebar"):l,{name:"if",hash:{},fn:n.program(6,o,0),inverse:n.noop,data:o,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))?a:"")+"\n"+i((s(e,"outlet")||l&&s(l,"outlet")||u).call(r,null!=l?s(l,"gift-pro-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:22,column:0},end:{line:22,column:24}}}))+"\n\n"+(null!=(a=(s(e,"isFlipped")||l&&s(l,"isFlipped")||u).call(r,"enable-likes",{name:"isFlipped",hash:{},fn:n.program(8,o,0),inverse:n.program(10,o,0),data:o,loc:{start:{line:24,column:0},end:{line:28,column:14}}}))?a:"")+'\n<div class="photo-comments-container"></div>\n\n'+(null!=(a=s(e,"if").call(r,null!=l?s(l,"showBannerAd"):l,{name:"if",hash:{},fn:n.program(12,o,0),inverse:n.noop,data:o,loc:{start:{line:32,column:0},end:{line:34,column:7}}}))?a:"")},useData:!0}),t={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)})),n.Template.register("hermes/sub-photo-left",(function(l,o){return(o=o||{}).partials=o.partials?n.merge(t,o.partials):t,e(l,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-submoola",(function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,o,l){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="photo-page-m-container '+(null!=(t=(r(a,"isFlipped")||n&&r(n,"isFlipped")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},"enable-mobile-photo-banner-ad",{name:"isFlipped",hash:{},fn:e.program(2,l,0),inverse:e.noop,data:l,loc:{start:{line:2,column:35},end:{line:2,column:112}}}))?t:"")+'">\n'+(null!=(t=e.invokePartial(r(o,"prbd-moola-position"),n,{name:"prbd-moola-position",hash:{categories:null!=n?r(n,"categories"):n,upgradeProLink:null!=n?r(n,"upgradeProLink"):n,advertisingStitching:null!=n?r(n,"advertisingStitching"):n,upsellFallback:!1,adUnit:null!=n?r(n,"adUnit"):n},data:l,indent:"\t",helpers:a,partials:o,decorators:e.decorators}))?t:"")+"</div>\n"},2:function(e,n,a,o,l){return"banner-ad-enabled"},compiler:[8,">= 4.3.0"],main:function(e,n,a,o,l){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return null!=(t=r(a,"if").call(null!=n?n:e.nullContext||{},null!=n?r(n,"showPhotoPageAd"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?t:""},usePartial:!0,useData:!0}),o={};e.Array.each(["prbd-moola-position"],(function(n){var a=e.Template.get("hermes/"+n);a&&(o[n]=a)})),e.Template.register("hermes/sub-photo-submoola",(function(n,l){return(l=l||{}).partials=l.partials?e.merge(o,l.partials):o,a(n,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("sub-photo-submoola-view",(function(t,e){let i=new t.SubscriptionsHelper,o=require("hermes-core/flog")(e);t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.isOwner=e.isOwner,this.showPhotoPageAd=!0,this.ad=t.config.flickr.moola.positions.photopage[e.adPosition??2],this.adSlots=[],this.disableLazyLoading=!0,this.adInView=!0,this.showUpgradeProLink=!1!==e.showUpgradeProLink,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){let e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(i){if(e.set("photo",i),this.appContext.adManager.canShowAdWithPhoto(e.get("photo"))){if(e.appContext.flipper.isFlipped("enable-page-categorizations"))return e.appContext.getModel("page-categorizations-models",e.photoId).then((function(i){e.set("categories",i.getValue("categories")),t.Snowplough.sendSelfDescribingEvent({schema:t.Snowplough.SCHEMAS.PAGE_CATEGORIZATIONS,data:{photoId:parseInt(e.photoId,10),status:"received",result:[e.get("categories")],source:i.getValue("source")}})})).catch((function(t){o.error("Error loading photo categorizations: ",t)}))}else this.showPhotoPageAd=!1}.bind(this))},buildContainer:function(){return this.disableLazyLoading&&this.renderAdContainer(),this},activate:function(){return this.showPhotoPageAd&&this.registerEventHandler(t.on("photoPage:dataLayerReadyForAds",function(){this.appContext.flipper.isFlipped("enable-mobile-photo-banner-ad")||this.requestAd()}.bind(this))),this},requestAd:function(){this.appContext.adManager.processAdsOnPage(),this.appContext.adManager.signalAdRequest(this)},renderAdContainer:function(){let e,o,a,n=this.get("container");!this.disableLazyLoading&&this.adInView||n&&(o=this.appContext.viewportData.getWidth(),a=t.config.flickr.moola.ad_breakpoint_mobile_desktop,e={showPhotoPageAd:this.showPhotoPageAd,adUnit:this.ad[o<a?"ad_unit_mobile":"ad_unit_desktop"],advertisingStitching:this.adEventStitch,upgradeProLink:this.showUpgradeProLink&&i.getProLandingPageUrl(i.UTM_HIDE_ADS),categories:this.appContext.flipper.isFlipped("enable-page-categorizations")?this.appContext.adManager.getAdCategories(this.get("categories")):""},this.adUnit=e.adUnit,this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(n)),this.adInView=!0,this.setContainerWithTemplate("sub-photo-submoola",e),YUI.Env.isServer||this.registerEventHandler(t.on("photoPage:dataLayerReadyForAds",(()=>{this.requestAd()}))))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-submoola","url-helper","subscriptions-helper"],langBundles:["common"]});YUI.add("hermes-template-sub-photo-submoola-banner",(function(e,a){var n=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,a,n,t,r){var l,o=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="submoola-banner-container">\n\t'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"adTemplate")||(null!=a?o(a,"adTemplate"):a))?l:e.hooks.helperMissing)?l.call(null!=a?a:e.nullContext||{},{name:"adTemplate",hash:{},data:r,loc:{start:{line:2,column:1},end:{line:2,column:15}}}):l)+"\n</div>\n"},useData:!0}),t={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)})),e.Template.register("hermes/sub-photo-submoola-banner",(function(a,r){return(r=r||{}).partials=r.partials?e.merge(t,r.partials):t,n(a,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("sub-photo-submoola-banner-view",(function(e,t){new e.SubscriptionsHelper;var i=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.nsid=t.nsid,this.photoId=t.photoId,this.isOwner=t.isOwner,this.showPhotoPageAd=!0,this.ad=e.config.flickr.moola.positions.photopage[3],this.adSlots=[],this.disableLazyLoading=!1,this.adInView=!1,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.adSettings=this.appContext.adManager.getAd(this,{position:"photopage",name:"photopage-mobile-banner",type:3}),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then(function(o){if(t.set("photo",o),this.appContext.adManager.canShowAdWithPhoto(t.get("photo"))){if(t.appContext.flipper.isFlipped("enable-page-categorizations"))return t.appContext.getModel("page-categorizations-models",t.photoId).then((function(i){t.set("categories",i.getValue("categories")),e.Snowplough.sendSelfDescribingEvent({schema:e.Snowplough.SCHEMAS.PAGE_CATEGORIZATIONS,data:{photoId:parseInt(t.photoId,10),status:"received",result:[t.get("categories")],source:i.getValue("source")}})})).catch((function(e){i.error("Error loading photo categorizations: ",e)}))}else this.showPhotoPageAd=!1}.bind(this))},buildContainer:function(){return this.disableLazyLoading&&this.renderAdContainer(),this},activate:function(){return this.showPhotoPageAd&&this.registerEventHandler(e.on("photoPage:dataLayerReadyForAds",(()=>{this.adInView?this.adSettings.requestAd():this.dataLayerReadyForRequest=!0}))),this},renderAdContainer:function(){let t=this.get("container");!this.disableLazyLoading&&this.adInView||t&&(this.adInView=!0,this.setContainerWithTemplate("sub-photo-submoola-banner",{adTemplate:new e.Handlebars.SafeString(this.adSettings.getAdTemplate())}),!YUI.Env.isServer&&this.dataLayerReadyForRequest&&this.adSettings.requestAd())}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-submoola-banner","url-helper","subscriptions-helper"],langBundles:["common"]});YUI.add("exif-camera-map",(function(e,a){"use strict";require("hermes-core/flog")(a);e.ExifCameraMap={cameraTypesMap:{"Digital SLR":{fileName:"CanonEOSRebelXT"},"Point and Shoot":{fileName:"CanonPowerShotSD100"},Cameraphone:{fileName:"SamsungGalaxySII"},"Video Camera":{fileName:"SonyCyberShotDSCF828"},"Digital Back":{fileName:"generic"},"Digital Rangefinder":{fileName:"generic"},"Film Camera":{fileName:"Lomo"},"Mirrorless Camera":{fileName:"PanasonicLumixGF1"}},cameraMap:{canonEOS1D:{pattern:/Canon EOS.(1D|R3)/i,fileName:"CanonEOSMarkII"},canonEOS10D:{pattern:/canon EOS [1-5]0D/i,fileName:"CanonEOS10D"},canonEOS60D:{pattern:/canon EOS ([5-7]D|[6-9]0D|R$|Ra|RP|R[5-7]|R10)/i,fileName:"CanonEOS60D"},canonEOSDigitalRebel:{pattern:/Canon EOS (REBEL T3i|[1-8][05]0D|Kiss X5)/i,fileName:"CanonEOSRebelXT"},canonPowerShotA510:{pattern:/Canon PowerShot A510/i,fileName:"CanonPowerShotA510"},canonPowerShotSD100:{pattern:/Canon PowerShot SD100/i,fileName:"CanonPowerShotSD100"},canonPowerShotSD750:{pattern:/Canon PowerShot SD750/i,fileName:"CanonPowerShotSD750"},canonPowershotG9:{pattern:/Canon Powershot G9/i,fileName:"CanonPowershotG9"},canonPowershotN:{pattern:/Canon Powershot N/i,fileName:"CanonPowershotN"},goPro:{pattern:/gopro/i,fileName:"GoProHero3"},htcEvo4G:{pattern:/HTC EVO 4G/i,fileName:"HTCEVO4G"},htcOne:{pattern:/HTC One/i,fileName:"HTCOne"},htcGeneric:{pattern:/htc/i,fileName:"HTCOne"},iPhone5:{pattern:/iphone 5/i,fileName:"iPhone5"},iPhone678Plus:{pattern:/iphone [6-8] plus/i,fileName:"iPhone6-7-8plus"},iPhone678:{pattern:/iphone [6-8]/i,fileName:"iPhone6-7-8"},"iPhoneX11-13":{pattern:/iphone (x|1[1-3])/i,fileName:"iPhoneX"},"iPhone14-16":{pattern:/iphone (1[4-6])/i,fileName:"iPhone14"},iPhone:{pattern:/iphone/i,fileName:"iPhone3-4"},kodakEasyShareZ740Zoom:{pattern:/kodak EasyShare Z740 Zoom/i,fileName:"KodakEasyShareZ740Zoom"},leica:{pattern:/Leica|Zeiss/i,fileName:"Leica"},lomo:{pattern:/Lomo/i,fileName:"Lomo"},lytro:{pattern:/Lytro/i,fileName:"Lytro"},motorolaX:{pattern:/Motorola X/i,fileName:"MotorolaX"},nexus5:{pattern:/Nexus 5|LGE Nexus 4/i,fileName:"Nexus5"},nikonCoolPix4600:{pattern:/Nikon CoolPix/i,fileName:"NikonCoolPix4600"},nikonDF:{pattern:/Nikon DF/i,fileName:"NikonDF"},nikonD345:{pattern:/Nikon D[1-5][a-z]?$/i,fileName:"NikonD3-4-5"},nikonD100:{pattern:/Nikon D/i,fileName:"NikonD100"},nikonZ9:{pattern:/Nikon Z 9/i,fileName:"NikonD3-4-5"},olympusEVOLTE500:{pattern:/Olympus EVOLTE 500/i,fileName:"OlympusEVOLTE500"},panasonicDMCFZ18:{pattern:/Panasonic DMC\-FZ18/i,fileName:"PanasonicDMC-FZ18"},panasonicLumixGF1:{pattern:/Panasonic DMC-GF1/i,fileName:"PanasonicLumixGF1"},pentaxK100D:{pattern:/Pentax K100D/i,fileName:"PentaxK100D"},polaroid:{pattern:/Polaroid/i,fileName:"Polaroid"},samsungGalaxySII:{pattern:/SamsungGalaxySII$/i,fileName:"SamsungGalaxySII"},samsungGalaxySIII:{pattern:/SamsungGalaxySIII$/i,fileName:"SamsungGalaxySII"},samsungGalaxyS7:{pattern:/SM-G93[05]/i,fileName:"SamsungGalaxyS7"},samsungGalaxyS8:{pattern:/SM-G95[05]/i,fileName:"SamsungGalaxyS8"},samsungGalaxyS9:{pattern:/SM-G96[05]/i,fileName:"SamsungGalaxyS9"},samsungGalaxyS10:{pattern:/SM-G97\d/i,fileName:"SamsungGalaxyS10"},sonyA7:{pattern:/Sony A7|ILCE-[179]/i,fileName:"SonyA7"},sonyAlphaDSLRA100:{pattern:/Sony Alpha DSLR\-A100/i,fileName:"SonyAlphaDSLR-A100"},sonyCyberShotDSCW80:{pattern:/Sony CyberShot DSC\-W80/i,fileName:"SonyCyber-ShotDSC-W80"},sonyCyberShotDSCF828:{pattern:/Sony CyberShot DSCF828|Sony DSC-F828/i,fileName:"SonyCyberShotDSCF828"},sonyEricsonK750i:{pattern:/Sony Ericson K750i/i,fileName:"SonyEricsonK750i"},sonyEricsonK800i:{pattern:/Sony Ericson K800i|K800i/i,fileName:"SonyEricsonK800i"},sonyNEX5:{pattern:/Sony NEX\-[56]|ILCE-5[01]00/i,fileName:"SonyNEX-5"},sonyRX:{pattern:/SonyRX|Sony DSC-RX100/i,fileName:"SonyRX"}},lensTypeCSS:{large:"lens-lrg",medium:"lens-med",small:"lens-small",phone:"lens-phone"},identifyLens:function(e,a){var n=null;return a&&a.match(/cameraphone/i)&&(n=this.lensTypeCSS.phone),!n&&e&&(e.match(/(55\-250)|(70\-200)|(300|400|500|600|800)/)?n=this.lensTypeCSS.large:e.match(/(\-(55|70|85|105|135|200))|(135)/)&&(n=this.lensTypeCSS.medium)),n||!a&&!e||(n=this.lensTypeCSS.small),{className:n}},identifyCamera:function(a,n){var i,o;return a?(i=this.cameraMap,e.Object.some(i,(function(e){if(e.pattern.test(a))return o=e,!0})),o||!o&&this.cameraTypesMap&&n&&this.cameraTypesMap[n]&&(o=this.cameraTypesMap[n]),o||(o={fileName:"generic"}),o):o},getCameraImageURL:function(a,n,i){var o,t;return null,(o=this.identifyCamera(a,n))&&o.fileName&&(t={url:(e.config.flickr.urls&&e.config.flickr.urls.assetRoot&&e.config.flickr.urls.assetRoot||"")+"/images/scrappy-camera-icons/"+o.fileName+(i&&i.viewportData.getDevicePixelRatio()>1?"@2x.png":".png")}),t}}}),"@VERSION@",{optionalRequires:["hermes-core"]});