YUI.add("photo-selector-sets-photolist-interaction-view",(function(t){var e=require("hermes-core/type-validator");t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.publicOnlyPhotos=t.publicOnlyPhotos,this},loadState:function(){return this.appContext.getModel(this.get("engagementModelName"),this.get("id")).then(function(t){this.set("engagement",t)}.bind(this))},buildContainer:function(){return this.setContainerWithTemplate("photo-selector-sets-photolist-set-interaction",{album:this.get("model").toJSON(),publicOnlyPhotos:this.publicOnlyPhotos,albumPageUrl:this.get("albumPageUrl")}),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectSet.bind(this))),this},selectSet:function(e){e.halt(),t.fire("photoSelector:subviewEvent",{eventName:"selectSetFromPhotoList",id:this.get("id"),title:this.get("model").getValue("title")})},destructor:function(){}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(t,i){return e.photoId(t)}},model:{writeOnce:"initOnly"},albumPageUrl:{writeOnce:"initOnly"},engagement:{value:null},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(e,i){return t.AttributeHelpers.validateString(e)}}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-sets-photolist-set-interaction","attribute-helpers"],optionalRequires:["fluid","hermes-core"],langBundles:["album-page"]});YUI.add("hermes-template-fluid-modal-nav-bar",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(e,"unless").call(null!=l?l:n.nullContext||{},null!=l?r(l,"disabled"):l,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:3},end:{line:7,column:14}}}))?o:""},2:function(n,l,e,a,t){var o,r,u=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,c="function",s=n.escapeExpression,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<li data-id="'+s(typeof(r=null!=(r=m(e,"id")||(null!=l?m(l,"id"):l))?r:i)===c?r.call(u,{name:"id",hash:{},data:t,loc:{start:{line:6,column:16},end:{line:6,column:22}}}):r)+'" data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:36},end:{line:6,column:45}}}):r)+'" '+(null!=(o=m(e,"if").call(u,null!=l?m(l,"searchPillConfig"):l,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:47},end:{line:6,column:113}}}))?o:"")+' class="link '+(null!=(o=m(e,"if").call(u,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:126},end:{line:6,column:157}}}))?o:"")+" "+(null!=(o=m(e,"if").call(u,null!=l?m(l,"hiddenByDefault"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:158},end:{line:6,column:194}}}))?o:"")+'" tabindex="0"><a data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:224},end:{line:6,column:233}}}):r)+'">'+s(typeof(r=null!=(r=m(e,"name")||(null!=l?m(l,"name"):l))?r:i)===c?r.call(u,{name:"name",hash:{},data:t,loc:{start:{line:6,column:235},end:{line:6,column:243}}}):r)+"</a></li>\n"},3:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'data-context="'+n.escapeExpression("function"==typeof(o=null!=(o=r(e,"searchPillConfig")||(null!=l?r(l,"searchPillConfig"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"searchPillConfig",hash:{},data:t,loc:{start:{line:6,column:85},end:{line:6,column:105}}}):o)+'"'},5:function(n,l,e,a,t){return"selected"},7:function(n,l,e,a,t){return"hidden"},9:function(n,l,e,a,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t\t<ul class="search-pillbox"></ul>\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t</form>\n'},11:function(n,l,e,a,t){return'\t\t\t<span role="button" class="close-x-button">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</span>\n'},compiler:[8,">= 4.3.0"],main:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(o=u(e,"each").call(r,null!=l?u(l,"links"):l,{name:"each",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:4,column:2},end:{line:8,column:11}}}))?o:"")+"\t\t</ul>\n"+(null!=(o=u(e,"if").call(r,null!=l?u(l,"enableSearch"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:2},end:{line:16,column:9}}}))?o:"")+(null!=(o=u(e,"if").call(r,null!=l?u(l,"showCloseXButton"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.noop,data:t,loc:{start:{line:17,column:2},end:{line:21,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),a={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(a[l]=e)})),n.Template.register("hermes/fluid-modal-nav-bar",(function(l,t){return(t=t||{}).partials=t.partials?n.merge(a,t.partials):a,e(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",(function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],s=this.appContext.viewportData.getWidth();for(this.set("showCloseXButton",void 0===e.showCloseXButton||e.showCloseXButton),this.set("onClose",void 0!==e.onClose?e.onClose:async e=>{}),i=n.sort((function(e,t){return e.maxWidth-t.maxWidth})),t=0;t<i.length;t++)if(s<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"}),commons:this.intlMessage({intlName:"commons.THE_COMMONS"})}),this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch"),showCloseXButton:this.get("showCloseXButton")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this,i=e.one(".search-field");let n=e.one(".close-x-button");if(n&&this.registerEventHandler(n.on("click",(e=>{this.get("onClose")(e)}))),this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach((function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))})),this.defaultContext=this.get("links")[0].value,this.get("currentSelection").hasAttribute("data-context")){var s=JSON.parse(this.get("currentSelection").getAttribute("data-context"));this.addPill(s.pillName,this.get("contextToString")[s.scope]),this.registerEventHandler(i.on("key",this.handleSearchFieldKeydown.bind(this),"down:8"))}return this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,s=t.target,a=s.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;if("a"===s.getDOMNode().tagName.toLowerCase())t.halt(),this.updateSelectionAndSearchField(a),this.fire("navigation",t);else if(s.hasClass("link"))t.halt(),this.updateSelectionAndSearchField(s),this.fire("navigation",t);else if(s.hasClass("search-pill-remover"))t.halt(),this.removeContext();else if(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===s.getDOMNode().type)){t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o;var h=this.get("currentSelection");h.hasAttribute("data-context")?r.contextSearch=h.getAttribute("data-id"):(this.deselectAll(),this.set("searchData",{type:"search",modelParams:r})),this.fire("search",r)}},reselectTab:function(){this.get("currentSelection")&&this.get("currentSelection").getDOMNode().click()},redoSearch:function(){var e=this.get("searchData");e&&"search"===e.type&&this.fire("search",e.modelParams)},addPill:function(t,i){var n,s={name:t};i&&(s.combo=!0,s.secondName=i),n=e.Node.create(this.templates("search-pill")(s)),this.get("container").one(".search-pillbox").appendChild(n)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},removeContext:function(){var t=this.get("container"),i=t.one(".search-field").getDOMNode(),n={},s=this.appContext.getViewer().nsid,a={},l=t.one('.link[data-id="'+this.defaultContext+'"]');this.removePills(),this.deselectAll(),l.addClass("selected"),this.set("currentSelection",l),a.target=l,i.value.length>0?(n.apiParams={},n.apiParams[e.AttributeHelpers.coerceString(i.name)]=i.value,n.id=e.SearchHelper.generateQueryString(n.apiParams)||e.guid(),n.viewerNsid=s,this.fire("search",n)):this.fire("navigation",a)},handleSearchFieldKeydown:function(t){var i=t.target;0===e.fluid.getTextFieldCursorPosition(i)&&""===e.fluid.getTextFieldSelection()&&this.removeContext()},updateSelectionAndSearchField:function(e){var t,i=this.get("container"),n=i.one(".search-field"),s=i.one(".search-pill");this.deselectAll(),e.addClass("selected"),this.set("currentSelection",e),this.get("currentSelection").hasAttribute("data-context")&&(t=JSON.parse(this.get("currentSelection").getAttribute("data-context"))),n&&(n.getDOMNode().value=""),t?s||this.addPill(t.pillName,this.get("contextToString")[t.scope]):s&&this.removePills()}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","hermes-template-search-pill","attribute-helpers","search-helper"],langBundles:["common","wallart","groups","search","commons"],optional:["person-models","photo-models"]});YUI.add("hermes-lang-wallart_es-us",(function(e,a){e.Intl.add("hermes/wallart","es-US",{WALL_ART:[{type:0,value:"Cuadros"}],YOU_CANCELLED_THIS_ITEM_ON_DATE:[{type:0,value:"Cancelaste el pedido de este artículo el "},{type:3,value:"date",style:"monthYear"},{type:0,value:"."}],YOU_ORDERED_THIS_ITEM_ON_DATE:[{type:0,value:"Hiciste el pedido de este artículo el "},{type:3,value:"date",style:"monthYear"},{type:0,value:"."}],RETURN_TO_YOUR_ORDER_HISTORY:[{type:0,value:"Volver a tu historial de pedidos"}],SELECT_A_PHOTO:[{type:0,value:"Seleccionar una foto"}],SELECT_PRODUCT:[{type:0,value:"Seleccionar producto"}],PHOTO_MOUNT:[{type:0,value:"Pósteres enmarcados"}],CANVAS:[{type:0,value:"Lienzo"}],CANVAS_WRAP:[{type:0,value:"Impresión en lienzo"}],PREMIUM_LUSTRE:[{type:0,value:"Con brillo de primera calidad"}],GLOSSY:[{type:0,value:"Satinado"}],MATTE:[{type:0,value:"Mate"}],SIZE:[{type:0,value:"Tamaño"}],CHECKOUT:[{type:0,value:"Finalizar compra"}],REORDER:[{type:0,value:"Cambiar el orden"}],TOTAL:[{type:0,value:"Total"}],UPLOAD:[{type:0,value:"Subir"}],CURATED_COLLECTIONS:[{type:0,value:"Colecciones destacadas"}],CREATIVE_COMMONS:[{type:0,value:"Creative Commons"}],NASA:[{type:0,value:"NASA"}],ABSTRACT:[{type:0,value:"Abstracto"}],ANIMALS:[{type:0,value:"Animales"}],PATTERNS:[{type:0,value:"Estampados"}],FOOD:[{type:0,value:"Comida"}],LANDSCAPES:[{type:0,value:"Paisajes"}],TRAVEL:[{type:0,value:"Viajes"}],MY_ALBUMS:[{type:0,value:"Mis álbumes"}],PRODUCT_DROPUP_CANVAS:[{type:0,value:'Impresión en lienzo profesional en marco de madera de 1,25"'}],PRODUCT_DROPUP_MOUNTED:[{type:0,value:'Papel fotográfico acabado con borde con textura de madera de 1"'}],MATERIAL_DROPUP_LUSTRE:[{type:0,value:"Professional Crystal Archive - Con brillo de primera calidad"}],MATERIAL_DROPUP_GLOSSY:[{type:0,value:"Professional Crystal Archive - Con brillo"}],MATERIAL_DROPUP_MATTE:[{type:0,value:"Professional Crystal Archive - Mate"}],SIZES_MODAL_SIZES_NOT_AVAILABLE:[{type:0,value:"Algunos tamaños no están disponibles debido a la resolución de la foto. Más información."}],MOUNTED_SAFE_AREA:[{type:0,value:"El área fuera de la línea sólida no se imprimirá. <br>Dentro de la línea está el área segura."}],CANVAS_SAFE_AREA:[{type:0,value:"El área fuera de la línea de puntos se imprimirá en el marco. <br>El área dentro de la línea se imprimirá en el frente."}],SAVING:[{type:0,value:"Guardando..."}],SAVED:[{type:0,value:"Se guardaron todos los cambios."}],WITH_CODE:[{type:0,value:"con el código:"}],FREE_SHIPPING_WITH_CODE:[{type:0,value:"Envío gratuito con el código:"}],PRODUCT_DESCRIPTION_CANVAS_PART_1_8X10:[{type:0,value:'Enmarcado de 8" × 10"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_10X8:[{type:0,value:'Enmarcado de 10" × 8"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_12X12:[{type:0,value:'Enmarcado de 12" × 12"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_11X14:[{type:0,value:'Enmarcado de 11" × 14"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_14X11:[{type:0,value:'Enmarcado de 14" × 11"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_16X20:[{type:0,value:'Enmarcado de 16" × 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X16:[{type:0,value:'Enmarcado de 20" × 16"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X24:[{type:0,value:'Enmarcado de 20" × 24"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_24X20:[{type:0,value:'Enmarcado de 24" × 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X30:[{type:0,value:'Enmarcado de 20" × 30"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_30X20:[{type:0,value:'Enmarcado de 30" × 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_2:[{type:0,value:'Bastidor de 1,25"<br>Marco resistente a impactos<br>Eganches para colgar incluidos'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10:[{type:0,value:'Impresión montada de 8" × 10"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8:[{type:0,value:'Impresión montada de 10" × 8"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12:[{type:0,value:'Impresión montada de 12" × 12"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14:[{type:0,value:'Impresión montada de 11" × 14"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11:[{type:0,value:'Impresión montada de 14" × 11"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20:[{type:0,value:'Impresión montada de 16" × 20"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16:[{type:0,value:'Impresión montada de 20" × 16"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30:[{type:0,value:'Impresión montada de 20" × 30"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20:[{type:0,value:'Impresión montada de 30" × 20"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE:[{type:0,value:'Acabado mate<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY:[{type:0,value:'Acabado con brillo<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE:[{type:0,value:'Acabado con brillo de primera calidad<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND:[{type:0,value:'Acabado mate<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND:[{type:0,value:'Acabado con brillo<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND:[{type:0,value:'Acabado con brillo de primera calidad<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa'}],PHOTO_TOO_SMALL_IN_SELECTED_SIZE:[{type:0,value:'Esta foto es demasiado pequeña para imprimirse en el tamaño que seleccionaste. Encontraremos el mejor tamaño más cercano automáticamente. <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">Más información</a>'}],BAD_SIZES:[{type:0,value:'Algunos tamaños no están disponibles debido a la resolución de la foto. <a target="_blank" href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">Más información</a>'}],NOT_AVAILABLE:[{type:0,value:"No disponible debido a la resolución de la foto"}],UPLOADR_ERROR_MESSAGE_GENERIC:[{type:0,value:"Ocurrió un problema al subir tu foto. Vuelve a intentarlo."}],UPLOADR_ERROR_MESSAGE_FILE_TYPE:[{type:0,value:"Al parecer, el tipo de archivo de esta foto no es válido. Sube una foto en formato PNG o JPG."}],UPLOADR_ERROR_MESSAGE_FILE_SIZE:[{type:0,value:"Al parecer, esta foto es demasiado grande para subirse. Podemos subir fotos con un tamaño máximo de 250 MB."}],UPLOADR_ERROR_MESSAGE_FILE_COUNT:[{type:0,value:"Selecciona solo una foto para subir."}],UPLOADR_ERROR_MESSAGE_LOW_QUALITY:[{type:0,value:'Al parecer, esta foto no cumple con los requisitos mínimos para su impresión. Selecciona una foto de al menos 975 &times; 825 píxeles. Más información sobre los <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567" target="_blank">requisitos</a> para la impresión.'}],UPLOADR_ERROR_MESSAGE_COLOR_SPACE:[{type:0,value:'Lo sentimos, pero no podemos imprimir fotos con espacios de colores CMYK o ProPhoto RGB. Recomendamos fotos con un espacio de colores sRGB. <a href="https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33" target="_blank">Más información</a>.'}],DRAG_DROP_TO_UPLOAD:[{type:0,value:'Arrastra y coloca tu foto para subirla o <a href="#" class="simulate-file-select">búscala</a>.'}],PHOTOS_UPLOADED_AS_PRIVATE:[{type:0,value:'Las fotos que se suban aquí se añadirán a tu <a href="/me/">Galería</a> de manera privada.'}],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_CANVAS:[{type:0,value:"Con este grado de acercamiento, tu foto se imprimirá a baja calidad. Aleja la imagen para comprar."}],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_MOUNTED:[{type:0,value:"Con este grado de acercamiento, tu foto se imprimirá a baja calidad. Aleja la imagen para comprar."}],INITIAL_DIALOG_CANVAS_DISABLED:[{type:0,value:"No podemos imprimir esta foto en un lienzo debido a su baja resolución. La foto debe tener una resolución de al menos 975 px × 825 px."}],INITIAL_DIALOG_MOUNTED_DISABLED:[{type:0,value:"No podemos hacer un póster con esta foto debido a su baja resolución. La foto debe tener una resolución de al menos 1000 px × 800 px. "}],GO_BACK:[{type:0,value:"Regresar"}],PHOTO_NOT_LARGE_ENOUGH_TO_ROTATE:[{type:0,value:"Esta foto no es lo suficientemente grande para girar a una orientación diferente."}],CHANGE_SIZE:[{type:0,value:"Cambiar tamaño"}],CHANGE_PHOTO:[{type:0,value:"Cambiar foto"}],CREATIONS:[{type:0,value:"Creaciones"}],VIEW_ORDER_HISTORY:[{type:0,value:"Ver historial de pedidos"}],COMPLETED:[{type:0,value:"Completado"}],IN_PROGRESS:[{type:0,value:"En curso"}],CREATE_NEW:[{type:0,value:"Crear nuevo"}],CREATIONS_EMPTY_WALLART:[{type:0,value:"No hay cuadros para mostrar."}],CREATIONS_EMPTY_BOOKS:[{type:0,value:"No hay libros de fotos para mostrar."}],CREATIONS_EMPTY_TERTIARY:[{type:0,value:'Mostraremos las creaciones en progreso y finalizadas aquí.<br>Más información sobre <a href="/create" title="">Cuadros</a> y <a href="/create" title="">Libros de fotos</a>.'}],CREATIONS_NOT_ABLE_DELETE:[{type:0,value:"No pudimos eliminar esta creación. Vuelve a intentarlo más tarde."}],PHOTO_FOR_WALLART_DELETED:[{type:0,value:"Se eliminó la foto para este cuadro."}],DELETE_THIS_WALLART:[{type:0,value:"Eliminar este cuadro"}],REORDER_THIS_WALLART:[{type:0,value:"Cambiar el orden de este cuadro"}],EDIT_THIS_WALLART:[{type:0,value:"Editar este cuadro"}],CHANGE_PAPER:[{type:0,value:"Cambiar papel"}],MATERIAL_DROPUP_LUSTRE_NEW:[{type:0,value:"El acabado lustre perlado le da una apariencia realista a tus fotos. Proporciona la saturación de colores del brillo y la resistencia a las huellas digitales del acabado mate."}],MATERIAL_DROPUP_GLOSSY_NEW:[{type:0,value:"Un acabado brillante impecable con un aspecto de alto contraste para que tus fotos se vean vívidas y claras. Excelente para las fotos con mucho reflejo como las de agua, metales y el cielo."}],MATERIAL_DROPUP_MATTE_NEW:[{type:0,value:"Un acabado mate elegante con menos contraste para realzar la textura de tus fotos. Resiste a las huellas digitales y es excelente para las fotos en blanco y negro."}],ON_SALE:[{type:0,value:"A la venta"}],PRODUCT_DESCRIPTION_CANVAS_PART_2_PREVIEW:[{type:0,value:'<span>Bastidor de 1,25"</span><span>Marco resistente a impactos</span><span>Aditamentos para colgar incluidos</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_PREVIEW:[{type:0,value:'<span>Acabado mate</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_PREVIEW:[{type:0,value:'<span>Acabado con brillo</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_PREVIEW:[{type:0,value:'<span>Acabado con brillo de primera calidad</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND_PREVIEW:[{type:0,value:'<span>Acabado mate</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND_PREVIEW:[{type:0,value:'<span>Acabado con brillo</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND_PREVIEW:[{type:0,value:'<span>Acabado con brillo de primera calidad</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa</span>'}],PHOTO_BOOK:[{type:0,value:"Libro de fotos"}],GLOSSY_HARDCOVER_BOOK_PREMIUM_LUSTRE_PAPER:[{type:0,value:"Libro de tapa dura brillante de 11 × 8,5 pulg. con papel ilustración de alto gramaje"}],LOW_QUALITY_WARNING:[{type:0,value:"No se puede imprimir esta foto porque la resolución es demasiado baja."}],INVALID_COLORSPACE_WARNING:[{type:0,value:"No se puede imprimir esta foto porque utiliza un espacio de colores que no es compatible."}],LOW_QUALITY_TYPE_WARNING:[{type:0,value:"No se puede imprimir esta foto con este tipo de cuadro porque la resolución es demasiado baja."}],NO_COMPLETED_ORDER:[{type:0,value:"No se completó ningún pedido."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-basic-confirm-actions",(function(n,t){var l=n.Template.Handlebars.revive({1:function(n,t,l,e,a){return" padded"},3:function(n,t,l,e,a){return" error"},5:function(n,t,l,e,a){return" shown"},7:function(n,t,l,e,a){var o,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t<a role="button" class="clickable">'+n.escapeExpression("function"==typeof(o=null!=(o=r(l,"message")||(null!=t?r(t,"message"):t))?o:n.hooks.helperMissing)?o.call(null!=t?t:n.nullContext||{},{name:"message",hash:{},data:a,loc:{start:{line:10,column:38},end:{line:10,column:49}}}):o)+"</a>\n"},9:function(n,t,l,e,a){var o=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return"\t\t\t"+n.escapeExpression((o(l,"renderTrustedMarkup")||t&&o(t,"renderTrustedMarkup")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},null!=t?o(t,"message"):t,{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:12,column:3},end:{line:12,column:34}}}))+"\n"},11:function(n,t,l,e,a){var o,r,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t<button\n\t\t\ttype="button"\n\t\t\tclass="cancel alt butt">\n\t\t\t<span class="button-text">'+n.escapeExpression("function"==typeof(r=null!=(r=s(l,"cancelButtonText")||(null!=t?s(t,"cancelButtonText"):t))?r:n.hooks.helperMissing)?r.call(null!=t?t:n.nullContext||{},{name:"cancelButtonText",hash:{},data:a,loc:{start:{line:19,column:29},end:{line:19,column:49}}}):r)+"</span>\n"+(null!=(o=n.invokePartial(s(e,"flickr-balls"),t,{name:"flickr-balls",data:a,indent:"\t\t\t",helpers:l,partials:e,decorators:n.decorators}))?o:"")+"\t\t</button>\n"},13:function(n,t,l,e,a){var o,r,s=null!=t?t:n.nullContext||{},u=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t<button\n\t\t\ttype="'+(null!=(o=u(l,"if").call(s,null!=t?u(t,"confirmButtonType"):t,{name:"if",hash:{},fn:n.program(14,a,0),inverse:n.program(16,a,0),data:a,loc:{start:{line:25,column:9},end:{line:25,column:76}}}))?o:"")+'"\n\t\t\tclass="confirm butt\n\t\t\t\t'+(null!=(o=u(l,"if").call(s,null!=t?u(t,"confirmButtonIsDangerous"):t,{name:"if",hash:{},fn:n.program(18,a,0),inverse:n.noop,data:a,loc:{start:{line:27,column:4},end:{line:27,column:50}}}))?o:"")+'">\n\t\t\t<span class="button-text">'+n.escapeExpression("function"==typeof(r=null!=(r=u(l,"confirmButtonText")||(null!=t?u(t,"confirmButtonText"):t))?r:n.hooks.helperMissing)?r.call(s,{name:"confirmButtonText",hash:{},data:a,loc:{start:{line:28,column:29},end:{line:28,column:50}}}):r)+"</span>\n"+(null!=(o=n.invokePartial(u(e,"flickr-balls"),t,{name:"flickr-balls",data:a,indent:"\t\t\t",helpers:l,partials:e,decorators:n.decorators}))?o:"")+"\t\t</button>\n"},14:function(n,t,l,e,a){var o,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return n.escapeExpression("function"==typeof(o=null!=(o=r(l,"confirmButtonType")||(null!=t?r(t,"confirmButtonType"):t))?o:n.hooks.helperMissing)?o.call(null!=t?t:n.nullContext||{},{name:"confirmButtonType",hash:{},data:a,loc:{start:{line:25,column:34},end:{line:25,column:55}}}):o)},16:function(n,t,l,e,a){return"button"},18:function(n,t,l,e,a){return" danger"},compiler:[8,">= 4.3.0"],main:function(n,t,l,e,a){var o,r=null!=t?t:n.nullContext||{},s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div class="basic-confirm-actions'+(null!=(o=s(l,"if").call(r,null!=t?s(t,"isPadded"):t,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:33},end:{line:5,column:63}}}))?o:"")+'">\n\t<div class="message\n\t\t'+(null!=(o=s(l,"if").call(r,null!=t?s(t,"messageIsError"):t,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:2},end:{line:7,column:37}}}))?o:"")+"\n\t\t"+(null!=(o=s(l,"if").call(r,null!=t?s(t,"showMessage"):t,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:2},end:{line:8,column:34}}}))?o:"")+'">\n'+(null!=(o=s(l,"if").call(r,null!=t?s(t,"messageIsClickable"):t,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:9,column:2},end:{line:13,column:9}}}))?o:"")+"\t\t</div>\n"+(null!=(o=s(l,"if").call(r,null!=t?s(t,"showCancelButton"):t,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:15,column:1},end:{line:22,column:8}}}))?o:"")+(null!=(o=s(l,"if").call(r,null!=t?s(t,"showConfirmButton"):t,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:1},end:{line:31,column:8}}}))?o:"")+"</div>\n"},usePartial:!0,useData:!0}),e={};n.Array.each(["flickr-balls","flickr-balls"],(function(t){var l=n.Template.get("hermes/"+t);l&&(e[t]=l)})),n.Template.register("hermes/basic-confirm-actions",(function(t,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,l(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls","hermes-template-flickr-balls"]});YUI.add("basic-confirm-actions-view",(function(t,e){let i=require("hermes-core/flog")(e);t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("isActiveViewAgnostic",!0),t.showConfirmButton=void 0===t.showConfirmButton||t.showConfirmButton,t.showCancelButton=void 0===t.showCancelButton||t.showCancelButton,t.confirmButtonText=void 0!==t.confirmButtonText?t.confirmButtonText:this.intlMessage({intlName:"common.OK"}),t.cancelButtonText=void 0!==t.cancelButtonText?t.cancelButtonText:this.intlMessage({intlName:"common.CANCEL"}),t.initialButtonState=Object.assign({confirm:"",cancel:""},t.initialButtonState),t.message=void 0!==t.message?t.message:"",t.showMessage=void 0!==t.showMessage&&t.showMessage,t.messageIsError=void 0===t.messageIsError||t.messageIsError,t.messageIsClickable=void 0!==t.messageIsClickable&&t.messageIsClickable,t.confirmButtonType=void 0!==t.confirmButtonType?t.confirmButtonType:void 0,t.confirmButtonIsDangerous=void 0!==t.confirmButtonIsDangerous&&t.confirmButtonIsDangerous,t.isPadded=void 0===t.isPadded||t.isPadded,this.onConfirm=void 0!==t.onConfirm?t.onConfirm:async(t,e)=>{},this.onCancel=void 0!==t.onCancel?t.onCancel:async(t,e)=>{},t.messageIsClickable&&(this.onMessageClick=void 0!==t.onMessageClick?t.onMessageClick:async(t,e)=>{}),this.params=t,this},loadState:function(){return Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("basic-confirm-actions",this.params),this},activate:function(){let t=this.get("container");if(this.cancelButton=t.one("button.cancel"),this.confirmButton=t.one("button.confirm"),this.messageNode=t.one(".message"),this.setButtonState(this.params.initialButtonState),this.cancelButton&&this.registerEventHandler(this.cancelButton.on("click",(t=>{this.onCancel(t)}))),this.confirmButton)if("submit"===this.params.confirmButtonType){let t=this.confirmButton.ancestor("form",!0);t?this.registerEventHandler(t.on("submit",(t=>{this.onConfirm(t,this)}))):i.error('Using confirmButtonType: "submit", But no parent form is present. Either remove this config option, or wrap this view in a form.')}else this.registerEventHandler(this.confirmButton.on("click",(t=>{this.onConfirm(t,this)})));this.messageNode&&this.params.messageIsClickable&&this.registerEventHandler(this.messageNode.on("click",(t=>{t.preventDefault(),this.onMessageClick(t)})))},setMessageState:function({isShown:t,isError:e,message:i}={}){void 0!==t&&this.messageNode.toggleClass("shown",t),void 0!==e&&this.messageNode.toggleClass("error",e),void 0!==i&&this.messageNode.set("innerHTML",i)},setButtonState:function({confirm:t,cancel:e}={}){void 0!==t&&this.confirmButton&&(this.confirmButton.toggleClass("loading",!1),this.confirmButton.removeAttribute("disabled"),"loading"===t?(this.confirmButton.toggleClass("loading",!0),this.confirmButton.setAttribute("disabled")):"disabled"===t&&this.confirmButton.setAttribute("disabled")),void 0!==e&&this.cancelButton&&(this.cancelButton.toggleClass("loading",!1),this.cancelButton.removeAttribute("disabled"),"loading"===e?(this.cancelButton.toggleClass("loading",!0),this.cancelButton.setAttribute("disabled")):"disabled"===e&&this.cancelButton.setAttribute("disabled"))},resetButtonState:function(){this.setButtonState({confirm:"",cancel:""})}})}),"@VERSION@",{requires:["flickr-view","hermes-template-basic-confirm-actions"],langBundles:["common"]});YUI.add("photo-selector-view",(function(t,e){var o,i=require("hermes-core/flog")(e),s=150;o={horizontal:20,vertical:20},t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").getHTML()&&this.setContainerWithTemplate("flickr-balls"),this.photoListView,this.searchPhotoListViews=[],this.publicOnlyGroups=t.publicOnlyGroups,this.publicOnlyPhotos=t.publicOnlyPhotos,this.safeOnlyPhotos=t.safeOnlyPhotos||!1,this.enableMultiSelect=t.enableMultiSelect||!1,this.multiSelectLimit=void 0===t.multiSelectLimit?1:t.multiSelectLimit,this.preSelectedPhotos=t.preSelectedPhotos||[],this.clearRegistriesOnDestroy=t.clearRegistriesOnDestroy||!1,this.navBarConfig=t.navBarConfig,this.initialButtonState=t.initialButtonState||{confirm:""},this.actionMessageConfig=t.actionMessageConfig||{message:"",messageIsError:!1},this.onConfirm=t.onConfirm||(t=>{}),this.selectedModels=[],t.enableVideos&&this.set("itemFilterFunction",!1),this.isUploading=!1,this.navBarConfig&&(this.subviewConfig["fluid-modal-nav-bar-view"]=Object.assign(this.subviewConfig["fluid-modal-nav-bar-view"],this.navBarConfig)),this.subviewConfig["basic-confirm-actions-view"]=Object.assign(this.subviewConfig["basic-confirm-actions-view"],{confirmButtonText:t.actionButtonLabel||this.intlMessage({intlName:"common.SELECT"}),showCancelButton:!1,initialButtonState:this.initialButtonState,message:this.actionMessageConfig.message,messageIsError:this.actionMessageConfig.messageIsError,showMessage:this.actionMessageConfig.showMessage,onConfirm:(t,e)=>{this.onConfirm(t,e)}}),this},subviewConfig:{"fluid-modal-nav-bar-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"basic-confirm-actions-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1}},loadState:function(){var e=this.appContext.getViewer().nsid,o={};return this.safeOnlyPhotos&&(e+="-safe",o.safeSearch="true"),this.publicOnlyPhotos&&(e+="-public",o.viewAs="public"),this.appContext.getModelRegistry("profile-selected-photos-models").then(function(i){i.removeAll(),this.selectionRegistry=i,this.setsPromise=this.appContext.getModel("sets-models",this.appContext.getViewer().nsid,{page:1,perPage:25}).then((t=>(this.set("setsModel",t),t)));var s={selectionModel:this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid),photostreamModel:this.appContext.getModel("photostream-models",e,o),setModelRegistry:this.appContext.getModelRegistry("set-models"),profileModel:this.appContext.getModel("person-profile-models",this.appContext.getViewer().nsid)};return new t.FlickrPromise(s).then(this.onLoadStateResolved.bind(this))}.bind(this))},onLoadStateResolved:function(e){if(this.set("selectionModel",e.selectionModel),this.set("photostreamModel",e.photostreamModel),this.set("setModelRegistry",e.setModelRegistry),this.set("profileModel",e.profileModel),this.canUpload=this.get("hasUploadCapabilities")&&!t.UserLimitsHelper.hasReachedUploadLimit(this.get("profileModel"),this.appContext),this.preSelectedPhotos&&this.preSelectedPhotos.length>0&&this.get("selectionModel").setValue("photos",this.preSelectedPhotos?this.preSelectedPhotos:[]),0===this.get("photostreamModel").getValue("totalItems")?this.set("photostreamEmpty",!0):this.set("photostreamEmpty",!1),this.get("groupId"))return this.appContext.getModel("group-pool-models",this.get("groupId")).then(function(t){this.set("groupModel",t)}.bind(this),(function(t){i.error("error loading group model",{err:t})}))},moveElementToFirstInArray:function(t,e,o){var i;return t.forEach((function(t,s){t[o]===e&&(i=s)})),t.unshift(t.splice(i,1)[0]),t},buildContainer:function(){return this.setContainerWithTemplate("photo-selector",{hasUploadCapabilities:this.get("hasUploadCapabilities"),canUpload:this.canUpload,searchable:this.get("searchable"),publicOnlyPhotos:this.get("publicOnlyPhotos"),photostreamEmpty:this.get("photostreamEmpty"),hasGroupCapabilities:this.get("groupId")}),this},loadPhotoList:function(e,a){var r,n=this,l=this.get("container"),h=l.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a||(a=!1),r={modelParams:e,fetchParams:e.fetchParams,parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,parentContainer:h,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),galleryId:this.get("galleryId"),type:this.get("defaultSelected").type},this.get("itemFilterFunction")&&(r.itemFilterFunction=this.get("itemFilterFunction")),r.layout={targetRowHeight:s,containerWidth:r.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:h.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=r,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:r,isActiveViewAgnostic:!0,container:l.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=l.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),r=l.one(".loader");h.getDOMNode().scrollTop=0,n.photoListView=e,r&&r.addClass("loaded"),s.hasChildNodes()||(o=a?t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"search.NO_MATCHES_FOR_QUERY_TERM_YOUR"})+"</p>"):n.publicOnlyPhotos?t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"})+"</p>"):t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),n.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSelectionPhotoList:function(){var e,a=this,r=this.get("container"),n=r.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),(e={parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,initialItems:this.get("selectionModel").getValue("photos").getList(),parentContainer:n,relayoutOnResize:!0,interactionViewName:"photo-selector-selection-interaction-view"}).layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!0,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:n.get("offsetHeight")},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,nsid:this.appContext.getViewer().nsid,container:r.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=r.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),l=r.one(".loader");i.addClass("photo-selector-selection-photolist"),n.getDOMNode().scrollTop=0,a.photoListView=e,l&&l.addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+a.intlMessage({intlName:"profile.NO_PHOTOS_SELECTED"})+"</p>"),s.empty(),i.prepend(o))}))}),(function(t){i.error("Error getting view",{err:t})}))},loadGroupPhotoList:function(e){var a,r=this,n=this.get("container"),l=n.one(".group-photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a={modelParams:e,parentName:this.name,paginateOnScroll:!0,parentContainer:l,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(a.itemFilterFunction=this.get("itemFilterFunction")),a.layout={targetRowHeight:s,containerWidth:a.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=a,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:a,isActiveViewAgnostic:!0,container:l}).then((function(e){return e.initialize().then((function(e){var o,i=n.one(".group-photo-selector-photos-container"),s=i.one(".photo-list-view");l.getDOMNode().scrollTop=0,r.photoListView=e,n.one(".loader").addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+r.intlMessage({intlName:"groups.GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),r.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSetsPhotoList:function(t){var e,s=this,a=this.get("container");this.photoListView&&this.photoListView.destroy(),(e={modelParams:t,parentName:this.name,paginateOnScroll:!0,parentContainer:a.one(".photo-selector-photos-wrapper"),relayoutOnResize:!0,interactionViewName:this.get("setsInteractionViewName"),engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial"}).layout={targetRowHeight:200,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.one(".photo-selector-photos-wrapper").get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:a.one(".photo-selector-photos-container")}).then((function(t){return t.initialize().then((function(t){var e=a.one(".loader");a.one(".photo-selector-photos-container .photo-list-view");a.one(".photo-selector-photos-wrapper").getDOMNode().scrollTop=0,s.photoListView=t,e&&a.one(".loader").addClass("loaded"),s.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSearchPhotoList:function(t){var e,a=this,r=this.get("container"),n=t.photoListContainerSelector?r.one(t.photoListContainerSelector):r.one(".photo-selector-photos-container"),l=t.parentContainerSelector?r.one(t.parentContainerSelector):r.one(".photo-selector-photos-wrapper"),h=t.maxNumRows?this.get("limitedRowsPhotoListViewName"):this.get("photoListViewName");this.searchPhotoListViews&&this.searchPhotoListViews[t.listId]&&this.searchPhotoListViews[t.listId].destroy(),e={modelParams:t.modelParams,parentName:this.name,paginateOnScroll:!0,parentContainer:l,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),engagementModelName:"photo-lite-models"},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),e.layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:o,forceAspectRatio:1,maxNumRows:t.maxNumRows?t.maxNumRows:Number.POSITIVE_INFINITY,alwaysDisplayOrphans:!!t.alwaysDisplayOrphans&&t.alwaysDisplayOrphans,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(h,{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:n,searchUrl:t.searchUrl,listId:t.listId}).then((function(e){return e.initialize().then((function(e){a.registerEventHandler(e.on("subviewViewEvent",a.handleSubviewEvent,a)),r.one(".photo-selector-search-lists-wrapper").getDOMNode().scrollTop=0,t.parentContainerSelector&&(r.one(t.parentContainerSelector).getDOMNode().scrollTop=0),a.searchPhotoListViews[t.listId]=e,r.one(".loader").addClass("loaded"),a.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},activate:function(){var e,o=this.get("container"),i=this.get("defaultSelected");return this.subviews["fluid-modal-nav-bar-view"]&&(this.navBarView=this.subviews["fluid-modal-nav-bar-view"],this.navBarView.on("search",(t=>{this.handleSearch(t)})),this.navBarView.on("navigation",(t=>{this.handleNavigation(t)}))),this.confirmView=this.subviews["basic-confirm-actions-view"],this.registerEventHandler(o.on("click",this.handleClick,this)),this.canUpload&&this.registerEventHandler(o.one(".file-select").on("change",this.handleFileSelect,this)),this.registerEventHandler(t.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),i?"group"===i.type?(e={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId")+"-public",collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(e.fetchParams={privacyFilter:1},e.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(e),this.toggleTitleBar(i.title,"group")):"gallery"===i.type?(e={registryName:"gallery-info-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoList"},this.loadPhotoList(e)):"galleryFaves"===i.type?(e={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(e)):(e={registryName:"set-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.filter=1),this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.moderationFilter=1),this.loadPhotoList(e),this.toggleTitleBar(i.title,"set")):0===this.get("photostreamModel").getValue("totalItems")?this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:this.publicOnlyPhotos?"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS":"common.PHOTO_SELECTOR_EMPTY_PHOTOS"},"empty",!1)):(e={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.viewAs="public"),this.loadPhotoList(e,!1)),this},toggleUploader:function(){this.get("hasUploadCapabilities")&&(this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-upload").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"))},toggleSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").removeClass("is-hiding")},toggleSearchListsSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleGroupSelector:function(){var t=this.get("container").one(".photo-selector-upload");t&&t.addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").removeClass("is-hiding")},toggleTitleBar:function(t,e,o){var i=this.get("container"),s=i.one(".photo-selector-title-bar"),a=s.one(".back-to-list"),r="";void 0===o&&(o=!0),"search"===e&&t&&(t='"'+t+'"'),"set"===e?r=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"}):"search"===e&&(r=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_SEARCH_LIST"})),o?a.removeClass("hidden"):a.addClass("hidden"),a.one(".back-to-list-text").set("text",r),s.one(".title").set("text",t),s.removeClass("hidden"),i.one(".photo-selector-photos-wrapper").addClass("showing-title"),i.one(".photo-selector-search-lists-wrapper").addClass("showing-title"),this.get("groupId")&&i.one(".group-photo-selector-photos-wrapper").addClass("showing-title")},hideTitleBar:function(){var t=this.get("container");t.one(".photo-selector-title-bar").addClass("hidden"),t.one(".photo-selector-photos-wrapper").removeClass("showing-title"),this.get("groupId")&&t.one(".group-photo-selector-photos-wrapper").removeClass("showing-title")},handleNavigation:async function(e){var o,i=e.details[0].target.getData("value"),s=this.get("container").one(".no-results");if("upload"===i)this.get("hasUploadCapabilities")&&(this.toggleUploader(),this.hideTitleBar()),this.get("fileDragDrop")?this.get("fileDragDrop").reset():this.canUpload&&(this.set("fileDragDrop",new t.HtmlFileDragDrop({dropZone:".photo-selector-upload > .drop-zone"})),this.get("fileDragDrop").on("drop",this.handleFileDrop,this));else{if(this.get("hasUploadCapabilities")&&this.toggleSelector(),"group"===i)o={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId"),collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(o.fetchParams={privacyFilter:1},o.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(o);else if("photostream"===i){if(0===this.get("photostreamModel").getValue("totalItems"))return s&&s.remove(),void(this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:this.publicOnlyPhotos?"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS":"common.PHOTO_SELECTOR_EMPTY_PHOTOS"},"empty",!1)));o={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(o.modelIdOrAttributes+="-safe",o.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(o.modelIdOrAttributes+="-public",o.fetchParams.viewAs="public"),this.loadPhotoList(o)}else if("sets"===i){if(await this.setsPromise,0===this.get("setsModel").getValue("totalItems")){var a=this.get("container").one(".photo-list-view");return s&&s.remove(),this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_NO_ALBUMS"},"empty",!1)),void a.empty()}o={registryName:"sets-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"albumsList"},this.loadSetsPhotoList(o)}else"gallery"===i?(o={registryName:"gallery-info-models",modelIdOrAttributes:this.get("galleryId"),collectionAttributeName:"photoList"},this.loadPhotoList(o)):"galleryFaves"===i?(o={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(o)):this.loadSelectionPhotoList();this.hideTitleBar()}},handleSearch:function(e){var o,i,s=e.details[0],a={},r=this.get("searchable");if(i=new t.SearchUrl(s.apiParams,this.appContext),this.toggleSearchListsSelector(),r.yours){if(this.searchUrlYourPhotos=new t.SearchUrl(s.apiParams,this.appContext),s.contextSearch)if("group"===s.contextSearch)this.searchUrlYourPhotos.setAPIParam("group_id",this.get("groupId"));else this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid);else this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid);r.contacts||r.everyone?(a.listId="yours",a.photoListContainerSelector=".photo-selector-search-list-yours .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-yours",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlYourPhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams()}},this.publicOnlyPhotos&&(o.fetchParams.privacyFilter=1),this.loadSearchPhotoList(a)):(this.toggleSelector(),o={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams(),additionalExtras:["o_dims"]}},this.publicOnlyPhotos&&(o.fetchParams.privacyFilter=1),this.loadPhotoList(o,!0))}r.contacts&&(this.searchUrlContactsPhotos=new t.SearchUrl(s.apiParams,this.appContext),this.searchUrlContactsPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),this.searchUrlContactsPhotos.setAPIParam("contacts","all"),a.listId="contacts",a.photoListContainerSelector=".photo-selector-search-list-contacts .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-contacts",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlContactsPhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlContactsPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlContactsPhotos.getAPIParams()}},this.loadSearchPhotoList(a)),r.everyone&&(this.searchUrlEveryonePhotos=new t.SearchUrl(s.apiParams,this.appContext),a.listId="everyone",a.photoListContainerSelector=".photo-selector-search-list-everyone .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-everyone",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlEveryonePhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:s.id,collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlEveryonePhotos.getAPIParams()}},this.loadSearchPhotoList(a)),this.toggleTitleBar(i.getAPIParams().text,"search",!1)},handleSubviewEvent:function(e){var o,i,s;return"selectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.enableMultiSelect&&this.hasReachMultiSelectLimit()||this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))):"unselectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel)}.bind(this))):"selection:remove"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.model.getValue("id"))},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel,!0)}.bind(this))):void("selectSetFromPhotoList"===e.eventName?(i={registryName:"set-models",modelIdOrAttributes:e.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(i.modelIdOrAttributes+="-public",i.fetchParams.filter=1),this.safeOnlyPhotos&&(i.modelIdOrAttributes+="-safe",i.fetchParams.moderationFilter=1),this.loadPhotoList(i,!1),this.toggleTitleBar(e.title,"set")):e.details&&"viewEntireSearchList"===e.details[0]&&(i={registryName:"search-photos-lite-models",modelIdOrAttributes:e.details[1].searchUrl.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:e.details[1].searchUrl.getAPIParams()}},this.publicOnlyPhotos&&(i.fetchParams.privacyFilter=1),this.toggleSelector(),this.loadPhotoList(i),s="search.YOUR_PHOTOS","contacts"===e.details[1].list?s="search.FROM_YOUR_CONTACTS":"everyone"===e.details[1].list&&(s="search.EVERYONES_PHOTOS"),s=this.intlMessage({intlName:s}),this.toggleTitleBar(s+": "+e.details[1].searchUrl.getAPIParams().text,"search")))},handleClick:function(t){var e=t.target;this.isUploading||(e.ancestor(".back-to-list",!0)?this.navBarView.get("currentSelection")?this.navBarView.reselectTab():this.navBarView.get("searchData")&&this.navBarView.redoSearch():e.ancestor(".simulate-file-select",!0)&&(t.halt(),this.get("container").one(".file-select").set("value",""),this.get("container").one(".file-select").getDOMNode().click()))},handleSelectPhoto:function(e){var o;if(o={photoModel:this.appContext.getModel("photo-models",e.getData("photo-id"))},!e.hasClass("invalid"))return this.set("photoSource",this.get("photoSourceOwnImage")),new t.FlickrPromise(o).then(function(t){this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))},hasReachMultiSelectLimit:function(){return this.get("selectionModel").getValue("photos").size()===this.multiSelectLimit},addPhotoToSelection:function(e,o){if(null===e)this.set("selected",null),t.fire("photoSelector:unselected");else if(e&&this.enableMultiSelect){var i=this.get("selectionModel").getValue("photos");this.hasReachMultiSelectLimit()||i.find(o)||(i.push(o),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}),this.updateSelectCountText(i.size()))}else e&&(this.set("selected",e),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}))},updateSelectCountText:function(e){var o=this.multiSelectLimit-e;t.fire("photoSelector:updateCount",{remainingCount:o})},removePhotoFromSelection:function(e,o,i){var s=this.get("selectionModel").getValue("photos");s.find(o)&&(s.removeFromList(e)&&(t.fire("photoSelector:unselected",{hasWarning:!1,photoId:e,wasLastPhotoSelected:0===s.size()}),this.updateSelectCountText(s.size()),i&&this.loadSelectionPhotoList()))},clearSelections:function(){t.fire("photoSelector:deselectAll");const e=this.navBarView.get("currentSelection");"selection"===e.getData("value")&&e.hasClass("selected")&&setTimeout((()=>{this.loadSelectionPhotoList()}),100)},handlePhotoSetSelector:function(t){var e;this.get("hasUploadCapabilities")&&this.toggleSelector(),e={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?t+"-public":t,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(e.fetchParams={filter:1}),this.loadPhotoList(e)},handlePhotoUploaded:function(t){this.appContext.getModelRegistry("photostream-models").then(function(e){e.attributeSearch({normalizedId:this.appContext.getViewer().nsid},!0).forEach((function(t){e.remove(t)})),this.addPhotoToSelection(t.id,t),this.onConfirm(),this.resetUploader()}.bind(this),function(t){this.appContext.err(t)}.bind(this))},handleFileSelect:function(t){var e;(e=t.target.getDOMNode().files[0])&&e.name&&this.uploadFile(e)},pollTicket:function(e){if(this.uploadTimer){if(t.moment().diff(this.uploadTimer,"seconds")>this.get("maxUploadTimeAllowed"))return this.showUploadError("GENERIC")}else this.uploadTimer=t.moment();this.appContext.callAPI("flickr.photos.upload.checkTickets",{tickets:e}).then(function(t){var o;t&&t.stat&&("ok"!==t.stat&&this.showUploadError("GENERIC"),t.uploader&&t.uploader.ticket instanceof Array&&(o=t.uploader.ticket[0])&&o.id===e&&(1===o.complete?this.appContext.getModel("photo-models",o.photoid).then(this.handlePhotoUploaded.bind(this),(function(t){this.showUploadError("GENERIC")})):2===o.complete?this.showUploadError("FILE_TYPE"):setTimeout(function(){this.pollTicket(e)}.bind(this),1e3)))}.bind(this),function(t){this.showUploadError("GENERIC")}.bind(this))},resetUploader:function(){this.clearUploadError(),this.get("container").one(".drop-zone").removeClass("uploading"),this.get("container").removeClass("uploading"),this.isUploading=!1,this.uploadTimer=void 0},uploadFile:function(e){var o,s,a,r=new FormData,n=t.config.flickr.api.hostname_client_upload;this.clearUploadError(),this.get("container").one(".drop-zone").addClass("uploading"),this.get("container").addClass("uploading"),this.isUploading=!0,r.append("api_key",t.SiteKey.getKey()),r.append("csrf",t.config.flickr.csrf.token),r.append("photo",e,e.name),r.append("async","1"),r.append("is_public","0"),r.append("is_friend","0"),r.append("is_family","0"),r.append("content_type","1"),(o=this._imgFileXhr=new XMLHttpRequest).open("POST",n,!0),o.withCredentials=!0,s=function(t){var e="object"==typeof t?t.target.statusText:t+"";i.error("Error during upload",{statusText:e}),this.resetUploader(),this.showUploadError("GENERIC")},a=function(e){var o,i,a,r;try{i=(r=t.one(e.currentTarget.responseXML)).one("rsp").getAttribute("stat")}catch(t){i="",o=""}return"ok"!==i?s((i||"empty")+": "+(o||"no message")):(a=r.one("ticketid").get("text"),this.pollTicket(a))},o.addEventListener("load",a.bind(this)),o.addEventListener("error",s.bind(this)),o.send(r)},clearUploadError:function(){this.get("container").one(".upload-error").setHTML("")},showUploadError:function(t){this.resetUploader(),this.get("container").one(".upload-error").setHTML(this.intlMessage({intlName:this.get("errorMessages")[t]})),this.get("fileDragDrop").showError()},handleFileDrop:function(t){this.isUploading||(t instanceof Error?this.showUploadError(t.message):this.uploadFile(t))},destructor:function(){this.photoListView&&this.photoListView.destroy()}},{ATTRS:{maxUploadTimeAllowed:{readOnly:!0,value:20},errorMessages:{readOnly:!0,value:{GENERIC:"common.PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC",FILE_TYPE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE",FILE_SIZE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE",FILE_COUNT:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT",
LOW_QUALITY:"common.PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY",COLOR_SPACE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE"}},photoSourceOwnImage:{readOnly:!0,value:1},hasUploadCapabilities:{value:!0},photoListViewName:{value:"photo-selector-photolist-view"},limitedRowsPhotoListViewName:{value:"photo-selector-limited-rows-photolist-view"},searchable:{value:{yours:!0,contacts:!0,everyone:!0}},interactionViewName:{value:"photo-selector-photolist-interaction-view"},setsInteractionViewName:{value:"photo-selector-sets-photolist-interaction-view"},itemFilterFunction:{value:function(t){return!t.getValue("isVideo")}},defaultSelected:{value:!1},selected:{},groupId:{},galleryId:{}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","flickr-api","html-file-dragdrop","hermes-template-photo-selector","photo-selector-photolist-view","photo-selector-limited-rows-photolist-view","photo-selector-photolist-interaction-view","photo-selector-sets-photolist-interaction-view","fluid-modal-nav-bar-view","basic-confirm-actions-view","user-limits-helper","site-key","moment"],optionalRequires:["hermes-core"],optional:["search-photos-lite-models"],langBundles:["common","wallart","search","groups","profile","upload-blocking"]});