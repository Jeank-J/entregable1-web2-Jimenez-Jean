YUI.add("album-list-toolbar-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.nsid=e.nsid,this.selected="albums",this},subviewConfig:{"fluid-magic-search-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["toolbar-action"]}},loadState:function(){return this.appContext.getModel("person-models",this.nsid).then(function(e){this.set("person",e),this.set("isViewingSelf",this.nsid===this.appContext.getViewer().nsid)}.bind(this),(function(e){}))},buildContainer:function(){var i=this.get("person")&&e.URLHelper.generatePersonUrls(this.get("person"));return this.setContainerWithTemplate("album-list-toolbar",{urls:i,isViewingSelf:this.get("isViewingSelf")}),this},buildErrorContainer:function(){},activate:function(){var e=this.get("container"),i=e.one(".create-album");return i&&this.registerEventHandler(i.on("click",(()=>{this.showCreateNewAlbumModal()}))),this.reorderButton=e.one(".reorder-button"),this.reorderButton&&this.registerEventHandler(this.reorderButton.on("click",(()=>this.showReorderModal()))),this},showCreateNewAlbumModal:function(){new e.CurationHelper(this.appContext,{view:this}).showCreationModal({viewName:"album-creation-view",customConfig:{inlineCreation:!1,usePhotoSelector:!0}})},showReorderModal:function(){let i=new e.ReorderGridHelper(this.appContext,"albums",{ownerId:this.nsid});var t=new e.Views["reorder-grid-modal-view"]({reorderHelper:i,appContext:this.appContext});this.reorderModal=new e.Views.FluidModal({appContext:this.appContext,subview:t,dismissOnOverlayClick:!1,classList:["reorder-grid-modal"],width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),hasSubviewConfigRefactor:!0}),this.reorderModal.show(),t.registerEventHandler(e.on("reorderGridModal:close",(i=>{this.reorderModal.close(i),"done"===i.action&&e.config.win.location.reload()})))}})}),"@VERSION@",{requires:["flickr-view","url-helper","hermes-template-album-list-toolbar","album-creation-view","reorder-grid-modal-view","reorder-grid-helper","curation-helper"],optional:[],langBundles:["album-page","common","reorder"]});YUI.add("albums-list-page-view",(function(e,t){var i=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("albums-list-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.isOwner=e.isOwner,this.withSetId=e.withSetId,this.pageParams=e.pageParams,e.modelRegistryName="sets-models",e.isViewingSelf=!!this.appContext.getViewer().signedIn&&this.nsid===this.appContext.getViewer().nsid,e.photoListConfig={modelParams:{registryName:"sets-models",modelIdOrAttributes:e.nsid,collectionAttributeName:"albumsList"},interactionViewName:"photo-list-album-interaction-view",engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial",parentName:this.name,pageParams:e.pageParams,viewBeaconAttribute:"primary",measureAFT:!0,maintainScrollPosition:!1,scrollToWithId:e.withSetId},e.photoListConfig.layout={targetRowHeight:240,forceAspectRatio:1,containerPadding:{top:8,right:0,bottom:8,left:0},itemSpacing:{horizontal:32,vertical:32}},this.isMobile&&(e.photoListConfig.layout.targetRowHeight=200,e.photoListConfig.layout.containerPadding.right=16,e.photoListConfig.layout.containerPadding.left=16,e.photoListConfig.layout.itemSpacing.horizontal=16,e.photoListConfig.layout.itemSpacing.vertical=16),e.subnavConfig={selected:"albums"},this},subviewConfig:{"moola-skybox-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,skyboxMoolaConfig:{position:"albums",name:"skybox",type:0,class:"nav-ad"},additionalViewClasses:function(){let t=this.appContext.viewportData.getWidth();return this.isMobile||t<e.config.flickr.moola.ad_breakpoint_mobile_desktop?["mobile-nav-ad"]:["desktop-nav-ad"]},disabled:function(){return!this.appContext.flipper.isFlipped("enable-skybox-gn-refactor")||this.appContext.getViewer().isPro||this._params.ownerIsPro}},"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"fluid-photostream-coverphoto-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-magic-subnav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:function(){return this.appContext.flipper.isFlipped("enable-skybox-gn-refactor")?["fluid-subnav-positioning"]:[]}},"album-list-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:function(){return["fluid-centered","enable-create-new-album-megamodal"]}},"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"pagination-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var t=this;return e.Promise.all([this.appContext.getModel("sets-models",this.nsid),this.appContext.getModel("person-models",this.nsid)]).then((function(e){t.set("albumsListModel",e[0]),t.set("totalItems",e[0].getValue("totalItems")),t.set("owner",e[1])}))},buildContainer:function(){var e,t,i=this.get("totalItems");return t=this.pageParams.page>1||i>Math.abs((this.pageParams.viewPageSize||20)*(this.pageParams.page||1)),e=i>0,this.setContainerWithTemplate("albums-list-page",{"fluid-header":this.subviews["fluid-photostream-coverphoto-view"]?this.subviews["fluid-photostream-coverphoto-view"].get("container"):"","album-list-toolbar-view":e?this.subviews["album-list-toolbar-view"].get("container"):"",showPagination:t,isEmpty:0===this.get("totalItems").length,isViewingSelf:this.nsid===this.appContext.getViewer().nsid}),this},buildHeadContainer:function(){var e="";e+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noarchive"}),e+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noarchive"}),YUI.Env.isServer?this.set("headContainer",e):(this.set("headContainer",this.subviews["pagination-view"].get("headContainer")),this.updateHead())},showBalls:function(){this.balls||(this.balls=e.Node.create('<div class="loading-balls"></div>'),this.balls.setHTML(this.templates("flickr-balls")({}))),this.get("container").append(this.balls)},hideBalls:function(){this.balls.remove()},downloadAlbum:function(t){var i,o,s=this;return e.rapidTracker.beacon(this.name,"openDownloadAlbum"),(o=e.Array.find(this.get("albumsListModel").getOwnedModels(),(function(e){return e.id===t})))&&this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===o.getValue("owner").id&&this.bulkDownloaderView.set("isOwnAlbum",!0),1===o.getValue("totalCount")?o.getValue("photoPageList").getPage({page:1,perPage:1}).then((function(t){let i,o=t[0];if(o.getValue("isVideo")&&!s.appContext.flipper.isFlipped("disable-video-playback"))i="/video_download.gne?id="+o.id;else{i=new e.PhotoSizeHelper(this.appContext).getLargestDownloadUrl(o,"singlePhotoAlbumInList")}e.config.doc.location.href=i})):o.getValue("totalCount")>e.config.flickr.downloadr.max_album_items?this.onError(this.intlMessage({intlName:this.bulkDownloaderView.get("isOwnAlbum")?"downloadr.ALBUM_TOO_MANY_OWN":"downloadr.ALBUM_TOO_MANY_OTHER",username:o.getValue("owner").getValue("displayname"),userurl:o.getValue("owner").getValue("url"),url:"/photos/organize?start_tab=one_set"+o.id})):(i=s.bulkDownloaderView.createTitle(o.getValue("photoCount"),o.getValue("videoCount")),void s.bulkDownloaderView.showDownloadDialog({title:i,setID:t}))},shareAlbum:function(t,i){var o=new e.Views.FluidShareAlbumView({appContext:this.appContext,albumId:t});this.showBalls(),o.on("sharePresentationClose",o.destroy.bind(o)),o.initialize().then(function(){this.prepareModal(i)}.bind(o)).then(function(){this.hideBalls()}.bind(this)).catch(function(e){this.hideBalls()}.bind(this))},deleteAlbum:function(t){var o=this;return this.confirmAlbumDelete(t).then((function(){return o.appContext.getModel("set-models",t).then((function(i){var s=[];return i.toJSON().photoPageList.forEach((function(e){s.push(o.appContext.getModel("photo-sets-models",e.id).then((function(e){e.getValue("sets").removeFromList(t)})))})),s.push(i.registry.remoteDelete(t).then((function(){o.get("albumsListModel").getValue("albumsList").remove(t),o.appContext.flapp.navigate(e.config.doc.location.href)}))),e.Promise.all(s)}))})).catch((function(e){i.error("Error deleting album",{err:e})}))},confirmAlbumDelete:function(t){return new e.Promise(((t,i)=>{let o=new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"common.CONFIRMATION"}),htmlMessage:this.intlMessage({intlName:"album-page.CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED"}),confirmButtonIsDangerous:!0,onConfirm:()=>t()}),hasSubviewConfigRefactor:!0}).show();this.registerEventHandler(o.on("close",(()=>i())))}))},handleClick:function(e){var t,i=e.target;i.hasClass("cta")&&(e.halt(),t=i.ancestor(".photo-list-album-interaction").getData("albumId"),i.hasClass("is-disabled")||(i.hasClass("share")?this.shareAlbum(t,i):i.hasClass("book")?this.appContext.flapp.navigate("/create"):i.hasClass("download")?this.downloadAlbum(t):i.hasClass("trash")&&this.deleteAlbum(t)))},destructor:function(){this.balls&&this.balls.inDoc()&&this.balls.remove(),this.balls=null,this.bulkDownloaderView&&this.bulkDownloaderView.destroy()},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.handleClick,this)),this.bulkDownloaderView=new e.BulkDownloaderView({appContext:this.appContext}),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handlePageResize.bind(this))),this.photoList=this.subviews["photo-list-view"],this.registerEventHandler(e.on("albumCreation:newAlbumCreated",this.handleNewAlbumCreated.bind(this))),this},handlePageResize:function(){e.config.win.innerWidth<=700?this.hasBeenMobilized||(this.hasBeenMobilized=!0,this.subviews["photo-list-view"].photoListLayout.targetRowHeight=200,this.subviews["photo-list-view"].photoListLayout.containerPadding.right=16,this.subviews["photo-list-view"].photoListLayout.containerPadding.left=16,this.subviews["photo-list-view"].photoListLayout.itemSpacing.horizontal=16,this.subviews["photo-list-view"].photoListLayout.itemSpacing.vertical=16):(this.hasBeenMobilized&&(this.subviews["photo-list-view"].photoListLayout.targetRowHeight=240,this.subviews["photo-list-view"].photoListLayout.containerPadding.right=0,this.subviews["photo-list-view"].photoListLayout.containerPadding.left=0,this.subviews["photo-list-view"].photoListLayout.itemSpacing.horizontal=32,this.subviews["photo-list-view"].photoListLayout.itemSpacing.vertical=32),this.hasBeenMobilized=!1)},onError:function(t){return this.errorDialog=new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),htmlMessage:t,showCancelButton:!1}),hasSubviewConfigRefactor:!0}).show(),this.errorDialog},handleNewAlbumCreated:function(){this.photoList.setItems(this.get("albumsListModel").getValue("albumsList").getList())}},{ATTRS:{}})}),"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","hermes-template-albums-list-page","global-nav-view","footer-full-view","pagination-view","fluid-photostream-coverphoto-view","fluid-share-album-view","hermes-template-flickr-balls","album-list-toolbar-view","hermes-template-head-link","hermes-template-head-meta","photo-size-helper"],optionalRequires:["bulk-downloader-view","hermes-core"],optional:["sets-models"],langBundles:["album-page","common","downloadr","magic-empty-states","meta"]});YUI.add("hermes-lang-magic-empty-states_es-us",(function(e,a){e.Intl.add("hermes/magic-empty-states","es-US",{PHOTOSTREAM_EMPTY:[{type:0,value:"No tienes fotos públicas"}],PHOTOSTREAM_EMPTY_OTHER:[{type:0,value:"Este usuario no tiene fotos públicas"}],PHOTOSTREAM_EMPTY_ACTION:[{type:0,value:"Subir fotos"}],ALBUM_EMPTY:[{type:0,value:"No tienes álbumes"}],ALBUM_EMPTY_OTHER:[{type:0,value:"Este usuario no tiene álbumes"}],ALBUM_EMPTY_ACTION:[{type:0,value:"Crear un álbum"}],FAVORITES_EMPTY:[{type:0,value:"No tienes favoritos"}],FAVORITES_EMPTY_OTHER:[{type:0,value:"Este usuario no tiene favoritos"}],FAVORITES_EMPTY_ACTION:[{type:0,value:"Explorar fotos"}],SHARED_ENTITY_EMPTY_OTHER:[{type:0,value:"No hay datos compartidos"}],CREATIONS_NO_WALLARTS:[{type:0,value:"Cuadros y libros de fotos. Creados por ti."}],CREATIONS_NO_BOOKS:[{type:0,value:"Cuadros y libros de fotos. Creados por ti."}],STATS_HEADLINE:[{type:0,value:"Presentamos estadísticas totalmente nuevas para Pro"}],STATS_HEADLINE_1:[{type:0,value:"Si hablamos de estadísticas. No te pierdas ningún detalle."}],STATS_HEADLINE_2:[{type:0,value:"Todo lo que necesitas saber. En lo que a estadísticas se refiere."}],STATS_HEADLINE_3:[{type:0,value:"Detalles. Detalles. Detalles."}],STATS_HEADLINE_4:[{type:0,value:"El nivel de detalle que buscas."}],STATS_SUB_HEADLINE:[{type:0,value:"Entérate de cómo las personas descubren tus fotos de Flickr. Conoce cuál de tus fotos es la más vista en este momento y cuál ha sido la más popular en toda la vida de tu cuenta de Flickr."}],STATS_SUB_HEADLINE_1:[{type:0,value:"¿Quieres saber cómo las personas descubren tus fotos de Flickr? ¿Te despierta curiosidad conocer cuál de tus fotos es la más vista en este momento y cuál ha sido la más popular en toda la vida de tu cuenta de Flickr? Accede a todos los detalles y más."}],FAVES_HEADLINE_YOU:[{type:0,value:"Empieza a elegir tus favoritas. Simplemente haz clic sobre la estrella."}],FAVES_SUBHEADLINE_YOU:[{type:0,value:"¿Te gusta algo de lo que ves? Haz clic en la estrella para que el fotógrafo pueda saberlo."}],FAVES_HEADLINE_OTHERS:[{type:1,value:"username"},{type:0,value:" aún no tiene favoritos. ¡Mantente alerta!"}],START_EXPLORING_FLICKR:[{type:0,value:"Empezar a explorar Flickr"}],CAMERAROLL_HEADLINE:[{type:0,value:"¿Tienes muchas fotos? Te ofrecemos mucho espacio."}],CAMERAROLL_SUBHEADLINE:[{type:0,value:"Todos los miembros de Flickr obtienen 1000 GB de almacenamiento GRATUITO para sus fotos. Todas las fotos se almacenan de forma segura. Puedes acceder a ellas desde tu computadora, smartphone o tableta en cualquier momento, desde cualquier lugar."}],CAMERAROLL_SUBHEADLINE_MAGIC:[{type:0,value:"Tu Filtro mágico está vacío porque, por el momento, no encontramos ninguna categoría relevante para tus fotos. Prueba a subir más fotos de temas diferentes."}],PHOTOSTREAM_HEADLINE_YOU:[{type:0,value:"No te olvides de subir tus fotos."}],PHOTOSTREAM_SUBHEADLINE_YOU:[{type:0,value:"La galería es tu carta de presentación al público. Sube fotos y publícalas mediante el Carrete para que tu galería se vuelva popular."}],START_UPLOADING:[{type:0,value:"Iniciar subida"}],PHOTOSTREAM_HEADLINE_YOU_PUBLIC:[{type:0,value:"No tienes fotos públicas."}],PHOTOSTREAM_SUBHEADLINE_YOU_PUBLIC:[{type:0,value:"La galería es tu carta de presentación al público. Publica tus fotos mediante el Carrete para que tu galería se vuelva popular."}],PHOTOSTREAM_HEADLINE_YOU_FRIENDS:[{type:0,value:"No tienes fotos públicas."}],PHOTOSTREAM_SUBHEADLINE_YOU_FRIENDS:[{type:0,value:"La galería es tu carta de presentación al público. Publica tus fotos mediante el Carrete para que tu galería se vuelva popular."}],PHOTOSTREAM_HEADLINE_YOU_FAMILY:[{type:0,value:"No tienes fotos públicas."}],PHOTOSTREAM_SUBHEADLINE_YOU_FAMILY:[{type:0,value:"La galería es tu carta de presentación al público. Publica tus fotos mediante el Carrete para que tu galería se vuelva popular."}],PHOTOSTREAM_HEADLINE_YOU_FRIENDSFAMILY:[{type:0,value:"No tienes fotos públicas."}],PHOTOSTREAM_SUBHEADLINE_YOU_FRIENDSFAMILY:[{type:0,value:"La galería es tu carta de presentación al público. Publica tus fotos mediante el Carrete para que tu galería se vuelva popular."}],PHOTOSTREAM_HEADLINE_OTHERS:[{type:1,value:"username"},{type:0,value:" aún no ha hecho pública ninguna foto."}],ALBUMS_HEADLINE_YOU:[{type:0,value:"Creemos un álbum."}],ALBUMS_SUBHEADLINE_YOU:[{type:0,value:"Organiza fácilmente todas tus fotos en hermosos álbumes para compartir con amigos, familiares o incluso otros miembros de Flickr."}],GO_TO_CAMERA_ROLL:[{type:0,value:"Ir al carrete"}],ALBUMS_HEADLINE_OTHERS:[{type:0,value:"Es posible que, ni bien "},{type:1,value:"username"},{type:0,value:" le dé un descanso a su cámara, publique un álbum para que podamos disfrutar."}],ALBUMS_SLOW:[{type:0,value:"En este momento, estamos teniendo problemas para mostrar este álbum. Vuelve a intentarlo."}],PHOTOSTREAM_SLOW:[{type:0,value:"En este momento, estamos teniendo problemas para mostrar esta galería. Vuelve a intentarlo."}],FAVES_SLOW:[{type:0,value:"En este momento, estamos teniendo problemas para mostrar estos favoritos. Vuelve a intentarlo."}],CAMERAROLL_SLOW:[{type:0,value:"En este momento, estamos teniendo problemas para mostrar este carrete. Vuelve a intentarlo."}],GALLERIES_SLOW:[{type:0,value:"Actualmente estamos teniendo problemas para mostrar estas expos. Vuelve a intentarlo."}],GALLERIES_HEADLINE_YOU:[{type:0,value:"Las paredes de tu expo lucen vacías."}],GALLERIES_SUBHEADLINE_YOU:[{type:0,value:"Las expos son una manera de mostrar las fotos y los videos de otros fotógrafos. Cuando veas algo que te gusta en Flickr, haz clic en el ícono [+] para guardarlo en una expo."}],GALLERIES_SUBHEADLINE_YOU_VISIT_PAGE:[{type:0,value:"Las expos son una manera de mostrar las fotos y los videos de otros fotógrafos. Cuando veas algo que te gusta en Flickr, visita la página para guardarla en una expo."}],GO_EXPLORE:[{type:0,value:"Explorar"}]})}),"@VERSION@",{requires:["intl"]});