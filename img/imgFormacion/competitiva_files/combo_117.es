YUI.add("fluid-fullscreen",(function(e){"use strict";function n(){var n=e.config.doc;return n.fullscreenEnabled||n.webkitFullscreenEnabled||n.mozFullScreenEnabled||n.msFullscreenEnabled}function l(){var n=e.config.doc;return n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement}e.mix(e.Node.DOM_EVENTS,{fullscreenchange:!0,webkitfullscreenchange:!0,mozfullscreenchange:!0,MSFullscreenChange:!0}),e.namespace("fluid").Fullscreen=function(){this.fullscreenChangeHandler=e.on("fullscreenchange",this.handleFullscreenChange.bind(this)),this.webkitFullscreenChangeHandler=e.on("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),this.mozFullscreenChangeHandler=e.on("mozfullscreenchange",this.handleFullscreenChange.bind(this)),this.msFullscreenChangeHandler=e.on("MSFullscreenChange",this.handleFullscreenChange.bind(this)),this.publish("enterFullscreen"),this.publish("exitFullscreen")},e.fluid.Fullscreen.prototype={isFullscreenCapable:n,isInFullscreenMode:l,enterFullscreen:function(l){var r=e.config.doc.documentElement;if(l&&(r=l.getDOMNode()),n()){if(r.requestFullscreen)return r.requestFullscreen();if(r.webkitRequestFullscreen)return r.webkitRequestFullscreen();if(r.mozRequestFullScreen)return r.mozRequestFullScreen();if(r.msRequestFullscreen)return r.msRequestFullscreen()}return!1},exitFullscreen:function(){var n=e.config.doc;if(l()){if(n.exitFullscreen)return n.exitFullscreen();if(n.webkitExitFullscreen)return n.webkitExitFullscreen();if(n.mozCancelFullScreen)return n.mozCancelFullScreen();if(n.msExitFullscreen)return n.msExitFullscreen()}return!1},handleFullscreenChange:function(){this.isInFullscreenMode()?this.fire("enterFullscreen"):this.fire("exitFullscreen")},destroy:function(){this.fullscreenChangeHandler.detach(),this.webkitFullscreenChangeHandler.detach(),this.mozFullscreenChangeHandler.detach(),this.msFullscreenChangeHandler.detach()}},e.augment(e.fluid.Fullscreen,e.EventTarget,!0,null,{prefix:"fullscreen"})}),"@VERSION@",{requires:["event-custom"],optional:[],affinity:"client"});YUI.add("fluid-magic-slideshow-view",(function(i){i.namespace("Views")[this.name]=i.Base.create("fluid-magic-slideshow-view",i.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.modelParams=e.photoListConfig.modelParams,this.pageParams=e.pageParams,this.modelParams.fetchParams&&(this.pageParams=i.merge(this.modelParams.fetchParams,this.pageParams)),this.pageParams.viewPageSize?this.positionMultipler=this.pageParams.viewPageSize:this.positionMultipler=this.pageParams.perPage,this},loadState:function(){var i=this;return this.appContext.getModel(this.modelParams.registryName,this.modelParams.modelIdOrAttributes,this.modelParams.fetchParams).then((function(e){i.position=(i.pageParams.nominalPage-1)*i.positionMultipler||0,i.collection=e.getValue("photoPageList"),i.isEnabled=i.collection.totalItems>0})).catch((function(i){}))},buildContainer:function(){return this.setContainerWithTemplate("fluid-magic-slideshow",{isEnabled:this.isEnabled}),this},toggleSlideshow:function(e){i.rapidTracker.beacon(this.name,"launchSlideshow"),e.halt(),new i.Views.Slideshow({appContext:this.appContext,collection:this.collection,pageParams:this.pageParams,position:this.position}).show()},activate:function(){return this.isEnabled&&this.registerEventHandler(this.get("container").one(".slideshow-toggle").on("click",this.toggleSlideshow.bind(this))),this}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-magic-slideshow","slideshow-view"],langBundles:["common"]});YUI.add("hermes-template-flickr-balls",(function(e,l){var a=e.Template.Handlebars.revive({1:function(e,l,a,r,n){return" block"},compiler:[8,">= 4.3.0"],main:function(e,l,a,r,n){var t,i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<div class="balls '+(null!=(t=i(a,"if").call(null!=l?l:e.nullContext||{},null!=l?i(l,"isBlock"):l,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n,loc:{start:{line:1,column:18},end:{line:1,column:46}}}))?t:"")+'">\n\t<div class="blue ball"></div><div class="pink ball"></div>\n</div>'},useData:!0}),r={};e.Array.each([],(function(l){var a=e.Template.get("hermes/"+l);a&&(r[l]=a)})),e.Template.register("hermes/flickr-balls",(function(l,n){return(n=n||{}).partials=n.partials?e.merge(r,n.partials):r,a(l,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-reorder-grid-modal-view",(function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,l,a){return'\t\t<div class="sort-dropdown-container">\n\t\t\t<div role="button" class="sort-tooltip-button">\n\t\t\t\t<svg class="icon icon-info_hollow"><use xlink:href="#icon-info_hollow"></use></svg>\n\t\t\t</div>\n\t\t\t<div role="button" class="sort-dropdown-button">\n\t\t\t\t<div class="menu-title"></div>\n\t\t\t\t<div class="arrow">\n\t\t\t\t\t<svg class="icon icon-dropdown_arrow"><use xlink:href="#icon-dropdown_arrow"></use></svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},compiler:[8,">= 4.3.0"],main:function(t,n,e,l,a){var r,o,i=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,d=t.escapeExpression,c="function",u=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"<header>\n\t<h1>"+d((u(e,"intlMessage")||n&&u(n,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"reorder.REORDER_ITEMS"},data:a,loc:{start:{line:2,column:5},end:{line:2,column:53}}}))+"</h1>\n"+(null!=(r=u(e,"if").call(i,null!=n?u(n,"hasSortMenu"):n,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:3,column:1},end:{line:15,column:8}}}))?r:"")+'</header>\n\n<div class="reorder-grid-container">\n\t'+d((u(e,"outlet")||n&&u(n,"outlet")||s).call(i,null!=n?u(n,"reorder-grid-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:19,column:1},end:{line:19,column:29}}}))+'\n\t<div class="loading-balls hidden">\n'+(null!=(r=t.invokePartial(u(l,"flickr-balls"),n,{name:"flickr-balls",data:a,indent:"\t\t",helpers:e,partials:l,decorators:t.decorators}))?r:"")+'\t</div>\n</div>\n<div class="drag-interaction-container">\n\t<div class="text-container">\n\t\t<span class="drag-tip">'+d((u(e,"renderTrustedMarkup")||n&&u(n,"renderTrustedMarkup")||s).call(i,null!=n?u(n,"dragTipHtml"):n,{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:26,column:25},end:{line:26,column:60}}}))+'</span>\n\t\t<span class="drag-error hidden">'+d((u(e,"renderTrustedMarkup")||n&&u(n,"renderTrustedMarkup")||s).call(i,null!=n?u(n,"dragErrorHtml"):n,{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:27,column:34},end:{line:27,column:71}}}))+'</span>\n\t</div>\n\t<div class="button-container">\n\t\t<button class="mini alt cancel-button">'+d(typeof(o=null!=(o=u(e,"cancelText")||(null!=n?u(n,"cancelText"):n))?o:s)===c?o.call(i,{name:"cancelText",hash:{},data:a,loc:{start:{line:30,column:41},end:{line:30,column:55}}}):o)+'</button>\n\t\t<button class="mini confirm-button" disabled>'+d(typeof(o=null!=(o=u(e,"confirmText")||(null!=n?u(n,"confirmText"):n))?o:s)===c?o.call(i,{name:"confirmText",hash:{},data:a,loc:{start:{line:31,column:47},end:{line:31,column:62}}}):o)+"</button>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0}),l={};t.Array.each(["flickr-balls"],(function(n){var e=t.Template.get("hermes/"+n);e&&(l[n]=e)})),t.Template.register("hermes/reorder-grid-modal-view",(function(n,a){return(a=a||{}).partials=a.partials?t.merge(l,a.partials):l,e(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});YUI.add("hermes-template-reorder-grid-view",(function(e,r){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,r,a,t,i){var l,n=e.lookupProperty||function(e,r){if(Object.prototype.hasOwnProperty.call(e,r))return e[r]};return'<div class="drag-list-container">\n\t\n</div>\n<div class="loading-indicator hidden">\n'+(null!=(l=e.invokePartial(n(t,"flickr-balls"),r,{name:"flickr-balls",data:i,indent:"\t",helpers:a,partials:t,decorators:e.decorators}))?l:"")+"</div>\n"},usePartial:!0,useData:!0}),t={};e.Array.each(["flickr-balls"],(function(r){var a=e.Template.get("hermes/"+r);a&&(t[r]=a)})),e.Template.register("hermes/reorder-grid-view",(function(r,i){return(i=i||{}).partials=i.partials?e.merge(t,i.partials):t,a(r,i)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});YUI.add("reorder-grid-view",(function(e,t){require("hermes-core/flog")(t);var r=200;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.reorderHelper=e.reorderHelper,this.layout=this.reorderHelper.layout,this.layout.maxWidth=this.layout.maxWidth||100,this.layout.itemSpacing=this.layout.itemSpacing||8,this.movedItems=[],this.perRow=1,this.cardWidth=1,this.mouseLeaveTimeouts={}},loadState:function(){return this.reorderHelper.load()},loadMore:async function(){if(!this.isLoadingMore){this.isLoadingMore=!0,this.loadingIndicator.removeClass("hidden");try{const e=await this.reorderHelper.loadMore();this.appendNewItems(e)}catch(e){return Promise.resolve()}finally{this.isLoadingMore=!1,this.loadingIndicator.addClass("hidden")}}},buildContainer:function(){this.setContainerWithTemplate("reorder-grid-view",{})},activate:function(){var t=this,r=this.get("container");this.scrollContainer=r.ancestor(".reorder-grid-container"),this.loadingIndicator=r.one(".loading-indicator"),this.dragContainer=this.get("container").one(".drag-list-container"),this.containerHeight=this.scrollContainer.get("clientHeight"),this.prepareItems(),this.registerEventHandler(e.globalEvents.subscribe("window:resize",(function(e){t.positionNodes()}))),this.registerEventHandler(e.on("reorderGridModal:doneClicked",this.handleDoneClick.bind(this))),this.registerEventHandler(this.scrollContainer.on("scroll",e.betterThrottle(this.handleScroll.bind(this),100,this,!1))),this.registerEventHandler(this.scrollContainer.on("scroll",e.betterThrottle(this.updateDeferredImages.bind(this),200,this,!0))),this.handleScroll(),this.updateDeferredImages(),this.throttledDragOver=e.betterThrottle(this.calculateDragOver.bind(this),200,t,!1)},prepareItems:async function(){let t=this;this.dragNodes=[];let i=this.scrollContainer.getDOMNode();for(;!this.isOverflown(i)&&!this.reorderHelper.hasLoadedEnd;)await this.loadMore();this.dragStartId||(this.dragStartId=this.registerEventHandler(this.dragContainer.delegate("dragstart",this.handleDragStart.bind(this),".drag-item")),this.dragOverId=this.registerEventHandler(this.dragContainer.delegate("dragover",this.handleDragOver.bind(this),".drag-item")),this.dragEndId=this.registerEventHandler(this.dragContainer.delegate("dragend",this.handleDragEnd.bind(this),".drag-item")),this.dropId=this.registerEventHandler(this.dragContainer.delegate("drop",this.handleDrop.bind(this),".drag-item")),this.registerEventHandler(this.dragContainer.delegate("mouseenter",this.handleItemMouseEnter.bind(this),".drag-drop-item")),this.registerEventHandler(this.dragContainer.delegate("mouseleave",this.handleItemMouseLeave.bind(this),".drag-drop-item")),this.pageDragOverId=this.registerEventHandler(e.on("dragover",e.betterThrottle(this.handlePageDragOver.bind(this),r,this,!1))),this.dragId=this.registerEventHandler(this.dragContainer.delegate("drag",e.betterThrottle(this.handleDrag.bind(this),r,this,!1),".drag-item")),e.use("anim",(function(e){t.YAnim=e})))},isOverflown:function(e){return e.scrollHeight>e.clientHeight},appendNewItems:function(e){var t=this;e.forEach((function(r,i){const a=t.reorderHelper.getItemTemplate(r,t.cardWidth);let d=t.dragContainer.appendChild(a);t.dragNodes.push(d),d.setAttribute("draggable",!0),d.addClass("drag-item"),d.setAttribute("data-item-id",e[i].id)})),this.positionNodes()},handleDragStart:function(e){var t,r,i,a=this,d=e._event;d.target;for(this.currentDragNode=e.target.ancestor(".drag-item",!0),t=0;t<this.dragNodes.length;t++)this.dragNodes[t].getAttribute("data-item-id")===this.currentDragNode.getAttribute("data-item-id")&&(this.currentDragNodeInitialIndex=t,this.currentDragNodeIndex=t);d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("Text",this.currentDragNode.id),r=a.currentDragNode.cloneNode(!0),i=a.currentDragNode.getDOMNode().getBoundingClientRect(),r.addClass("drag-image-clone"),r.setStyle("top",i.top),r.setStyle("left",i.left),this.dragContainer.appendChild(r),d.dataTransfer.setDragImage(r.getDOMNode(),r.get("offsetWidth")/2,r.get("offsetHeight")/2),setTimeout((function(){a.currentDragNode.addClass("placeholder"),a.dragContainer.removeChild(r)}),0),this.get("container").setStyle("width",this.get("container").getDOMNode().getBoundingClientRect().width),this.scrollContainer.setStyle("overflow","hidden")},handleDragOver:function(e){var t=e._event;t.preventDefault(),t.dataTransfer.dropEffect="move",this.throttledDragOver(e)},handleDrag:function(e){var t=this.scrollContainer.getDOMNode(),r=t.getBoundingClientRect(),i=this.mousePositionY-r.top;i<20?new this.YAnim.Anim({duration:.2,node:this.scrollContainer,to:{scroll:[0,t.scrollTop-150]}}).run():i>r.height-20&&new this.YAnim.Anim({duration:.2,node:this.scrollContainer,to:{scroll:[0,t.scrollTop+150]}}).run()},calculateDragOver:function(e){var t,r,i=e.target.ancestor(".drag-item",!0),a=0;if(i&&i.getAttribute("data-item-id")!==this.currentDragNode.getAttribute("data-item-id")){for(r=0;r<this.dragNodes.length;r++)if(this.dragNodes[r].getAttribute("data-item-id")===this.currentDragNode.getAttribute("data-item-id")){a=r,this.dragNodes.splice(r,1),t=this.reorderHelper.reorderedItemList.splice(r,1)[0];break}for(r=0;r<this.dragNodes.length;r++)if(this.dragNodes[r].getAttribute("data-item-id")===i.getAttribute("data-item-id")){this.currentDragNodeIndex=a>r?r:r+1,this.dragNodes.splice(this.currentDragNodeIndex,0,this.currentDragNode),this.reorderHelper.reorderedItemList.splice(this.currentDragNodeIndex,0,t);break}this.positionNodes(!0)}},handleDragEnd:function(t){var r=t.target.ancestor(".drag-item",!0);t.preventDefault(),r.removeClass("placeholder"),this.currentDragNodeInitialIndex!==this.currentDragNodeIndex&&(e.fire("reorderGrid:itemMoved"),-1===this.movedItems.indexOf(r.getAttribute("data-item-id"))&&this.movedItems.push(r.getAttribute("data-item-id"))),this.scrollContainer.setStyle("overflow","auto"),this.get("container").setStyle("width","initial")},handleDrop:function(e){e.preventDefault()},handleDoneClick:function(){this.queueReorder()},queueReorder:async function(){var t=this,r={};if(0!==this.movedItems.length)if(this.shouldReorder=!1,this.isReordering)this.shouldReorder=!0;else{this.isReordering=!0,this.dragNodes.forEach((function(e,i){for(var a=0;a<t.movedItems.length;a++)if(t.movedItems[a]===e.getAttribute("data-item-id")){r[e.getAttribute("data-item-id")]=i+1;break}})),e.fire("reorderGrid:saveStarted",{isSaving:!0});try{this.reorderHelper.hasPredefinedSortType()?await this.reorderHelper.sortItems(this.reorderHelper.sortType):(await this.reorderHelper.reorderItems(r),this.movedItems=[]),this.shouldReorder?this.queueReorder():e.fire("reorderGrid:saveFinished",{})}catch(t){e.fire("reorderGrid:saveFinished",{error:t})}finally{this.isReordering=!1}}},positionNodes:function(e){for(var t=this,r=t.dragContainer.getDOMNode().getBoundingClientRect().width,i=0,a=this.layout.maxWidth+1;a>this.layout.maxWidth;)a=r/++i-this.layout.itemSpacing.horizontal;if(a<=0&&(a=this.layout.maxWidth),this.perRow=i,this.cardWidth=a,e){var d=this.dragNodes.indexOf(this.currentDragNode),o=d<this.dragNodes.length?this.dragNodes[d+1]:null;this.dragContainer.removeChild(this.currentDragNode),o?t.dragContainer.insertBefore(this.currentDragNode,o):t.dragContainer.appendChild(this.currentDragNode)}else this.dragContainer.set("innerHTML","");this.dragNodes.forEach((function(r,i){r.setAttribute("draggable",!0),r.setStyle("width",a),r.setStyle("height",a),r.setStyle("marginBottom",t.layout.itemSpacing.vertical),r.setStyle("marginLeft",t.layout.itemSpacing.horizontal/2),r.setStyle("marginRight",t.layout.itemSpacing.horizontal/2),e||t.dragContainer.appendChild(r)})),t.dragContainer.getDOMNode().getBoundingClientRect().width!==r&&this.positionNodes(e),this.hideOutsideRows(),this.updateDeferredImages()},handleItemMouseEnter:function(e){var t=e.target.ancestor(".drag-drop-item",!0);clearTimeout(this.mouseLeaveTimeouts[t.getAttribute("data-item-id")]),t.one(".sub-photo-info-bar").addClass("shown"),setTimeout((function(){t.addClass("hovered")}),0)},handleItemMouseLeave:function(e){var t=e.target.ancestor(".drag-drop-item",!0);t.removeClass("hovered"),this.mouseLeaveTimeouts[t.getAttribute("data-item-id")]=setTimeout((function(){t.one(".sub-photo-info-bar").removeClass("shown")}),200)},handleScroll:function(e){this.hideOutsideRows(),this.checkLoadMore(e)},handlePageDragOver:function(e){this.mousePositionY=e.clientY},hideOutsideRows:function(){var e=this,t=this.scrollContainer.get("scrollTop"),r=e.cardWidth+e.layout.itemSpacing.vertical;this.dragNodes.forEach((function(i,a){var d=Math.floor(a/e.perRow),o=d===Math.floor((e.dragNodes.length-1)/e.perRow)&&e.dragNodes.length%e.perRow!=0;d*r<t-2*r||d*(e.cardWidth+e.layout.itemSpacing.vertical)>t+e.containerHeight+r?i.addClass("invisible"):i.removeClass("invisible"),o&&!e.reorderHelper.hasLoadedEnd&&e.reorderHelper.itemList.length>e.perRow?i.addClass("hidden"):i.removeClass("hidden")}))},updateDeferredImages:function(){this.dragNodes.forEach((function(e){let t=e.one(".photo");e.hasClass("invisible")||t.setStyle("backgroundImage",`url(${t.getAttribute("data-img-src-for-defer")})`)}))},checkLoadMore:function(e){var t=this.scrollContainer.get("scrollTop"),r=this.scrollContainer.get("scrollHeight");t+this.containerHeight+200>r&&this.loadMore()},reorderFullList:function(t){this.dragNodes=[],this.dragContainer.empty(),this.reorderHelper.reorderedItemList=t,this.movedItems=t.map((e=>e.id)),e.fire("reorderGrid:fullListReordered"),this.appendNewItems(t)}},{ATTRS:{}})}),"@VERSION@",{requires:["flickr-view","hermes-template-reorder-grid-view","photo-model-helper"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("reorder-grid-modal-view",(function(e,t){require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.dragTipHtml=this.appContext.viewportData.getWidth()<700?this.intlMessage({intlName:"reorder.REORDER_TIP_TOUCH_SCREENS"}):this.intlMessage({intlName:"reorder.REORDER_TIP"}),this.dragErrorHtml=this.intlMessage({intlName:"reorder.REORDER_WENT_WRONG"})},subviewConfig:{"reorder-grid-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1}},buildContainer:function(){this.confirmText=this.intlMessage({intlName:"common.DONE"}),this.savingText=this.intlMessage({intlName:"photo-editor.LOADING_EXPORTING"}),this.setContainerWithTemplate("reorder-grid-modal-view",{dragTipHtml:this.dragTipHtml,dragErrorHtml:this.dragErrorHtml,confirmText:this.confirmText,cancelText:this.intlMessage({intlName:"common.CANCEL"}),hasSortMenu:this.params.hasSortMenu})},activate:function(){var t=this.get("container");if(this.doneButton=t.one(".confirm-button"),this.cancelButton=t.one(".cancel-button"),this.dragTipNode=t.one(".drag-tip"),this.dragErrorNode=t.one(".drag-error"),this.dragTryAgainButton=t.one(".try-again-button"),this.reorderGrid=this.subviews["reorder-grid-view"],this.registerEventHandler(this.doneButton.on("click",this.handleDoneClick.bind(this))),this.registerEventHandler(this.cancelButton.on("click",this.handleCancelClick.bind(this))),this.registerEventHandler(this.dragTryAgainButton.on("click",this.handleDragTryAgainClick.bind(this))),this.registerEventHandler(e.on("reorderGrid:saveStarted",this.handleDragSaveStart.bind(this))),this.registerEventHandler(e.on("reorderGrid:saveFinished",this.handleDragSaveFinish.bind(this))),this.registerEventHandler(e.on("reorderGrid:itemMoved",(()=>{if(this.doneButton.removeAttribute("disabled"),this.params.hasSortMenu&&this.params.reorderHelper.hasPredefinedSortType()){this.params.reorderHelper.revertToManualSortType(),this.appContext.viewportData.getWidth()<=700?this.sortMenuTitle.set("text",`${this.intlMessage({intlName:"album-page.SORT"})}`):this.sortMenuTitle.set("text",`${this.intlMessage({intlName:"album-page.SORT_TYPE_LABEL"})} ${this.params.reorderHelper.getCurrentSortTypeName()}`)}}))),this.registerEventHandler(e.on("reorderGrid:fullListReordered",(()=>{this.doneButton.removeAttribute("disabled")}))),this.params.hasSortMenu){this.sortTooltipButton=t.one(".sort-tooltip-button"),this.sortMenuButton=t.one(".sort-dropdown-button"),this.sortMenuTitle=this.sortMenuButton.one(".menu-title"),this.sortMenuArrow=this.sortMenuButton.one(".arrow"),this.registerEventHandler(this.sortMenuButton.on("click",(()=>this.handleSortMenuClick()))),this.registerEventHandler(this.sortTooltipButton.on("click",(()=>this.handleSortTooltipClick()))),this.appContext.viewportData.getWidth()<=700?this.sortMenuTitle.set("text",`${this.intlMessage({intlName:"album-page.SORT"})}`):this.sortMenuTitle.set("text",`${this.intlMessage({intlName:"album-page.SORT_TYPE_LABEL"})} ${this.params.reorderHelper.getCurrentSortTypeName()}`)}},handleDragSaveStart:function(e){this.doneButton.set("innerHTML",this.savingText),this.doneButton.setAttribute("disabled")},handleDragSaveFinish:function(t){this.dragTipNode.toggleClass("hidden",!!t.error),this.dragErrorNode.toggleClass("hidden",!t.error),this.doneButton.set("innerHTML",this.confirmText),this.doneButton.removeAttribute("disabled"),t.error||e.fire("reorderGridModal:close",{action:"done"})},handleDragTryAgainClick:function(){this.reorderGrid.queueReorder()},handleDoneClick:function(){e.fire("reorderGridModal:doneClicked")},handleCancelClick:function(){e.fire("reorderGridModal:close",{action:"cancel"})},handleSortMenuClick:function(){this.dropdown=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorElement:this.sortMenuArrow,keyboardAnchorElement:this.sortMenuButton,closeOnScroll:!0,menuItems:this.params.reorderHelper.getSortMenuItems()}),this.dropdown.show(),this.registerEventHandler(this.dropdown.on("selected",(async t=>{if(t&&t.menuItem){let r=t.menuItem.value;if(r===this.params.reorderHelper.sortType)return void this.dropdown.close();if(this.params.reorderHelper.isManualSortType(this.params.reorderHelper.sortType)&&!this.params.reorderHelper.isManualSortType(r)&&!localStorage.getItem("dontShowAlbumSortWarningAgain"))try{await this.confirmChangeSort()}catch(e){return void this.dropdown.close()}this.sortMenuTitle.set("text",`${this.intlMessage({intlName:"album-page.SORT_TYPE_LABEL"})} ${t.menuItem.text}`),this.dropdown.close();let i=this.get("container").one(".loading-balls");i.toggleClass("hidden");try{const e=await this.params.reorderHelper.loadSortPreview(r);this.reorderGrid.reorderFullList(e),i.toggleClass("hidden")}catch(t){i.toggleClass("hidden"),new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"common.OOPS"}),htmlMessage:this.intlMessage({intlName:"products-flickrpro.SOMETHING_WENT_WRONG"}),showCancelButton:!1}),hasSubviewConfigRefactor:!0}).show()}}})))},confirmChangeSort:async function(){return new Promise(((t,r)=>{new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"album-page.CHANGE_SORT_ORDER_TITLE"}),htmlMessage:this.intlMessage({intlName:"album-page.CHANGE_SORT_ORDER_EXPLANATION"}),onConfirm:e=>{localStorage.setItem("dontShowAlbumSortWarningAgain",!0),t()},onCancel:e=>r(),onClose:e=>r()}),hasSubviewConfigRefactor:!0}).show()}))},handleSortTooltipClick:function(){new e.Views.FluidDroparound({appContext:this.appContext,anchorElement:this.sortTooltipButton,htmlMessage:e.StringHelper.preventOrphans(this.intlMessage({intlName:"album-page.SORT_ALBUM_TOOLTIP"})),closeOnScroll:!0,width:240}).show()}},{ATTRS:{}})}),"@VERSION@",{requires:["flickr-view","hermes-template-reorder-grid-modal-view","hermes-template-flickr-balls","reorder-grid-view","api-helper","string-helper"],optionalRequires:["hermes-core"],langBundles:["common","photo-editor","reorder","album-page","products-flickrpro"]});YUI.add("hermes-lang-photo-editor_es-us",(function(e,a){e.Intl.add("hermes/photo-editor","es-US",{FILTERS:[{type:0,value:"Filtros"}],ORIENTATION:[{type:0,value:"Orientación"}],ADJUST:[{type:0,value:"Ajustar"}],CROP:[{type:0,value:"Cortar"}],FOCUS:[{type:0,value:"Enfocar"}],SELECTIVE_BLUR:[{type:0,value:"Desenfoque selectivo"}],BORDER:[{type:0,value:"Borde"}],STICKER:[{type:0,value:"Sticker"}],TEXT:[{type:0,value:"Texto"}],BRUSH:[{type:0,value:"Pincel"}],FRAMES:[{type:0,value:"Marcos"}],BORDER_COLOR:[{type:0,value:"Color"}],BORDER_THICKNESS:[{type:0,value:"Grosor"}],TEXT_FOREGROUND:[{type:0,value:"Primer plano"}],TEXT_BACKGROUND:[{type:0,value:"Fondo"}],TEXT_SIZE:[{type:0,value:"Tamaño"}],TEXT_FONT:[{type:0,value:"Fuente"}],TEXT_ALIGNMENT:[{type:0,value:"Alineación"}],TEXT_TO_FRONT:[{type:0,value:"Al frente"}],TEXT_DEFAULT_TEXT:[{type:0,value:"Clic para editar"}],ORIENTATION_MINUS_90:[{type:0,value:"Rotar -90°"}],ORIENTATION_PLUS_90:[{type:0,value:"Rotar +90°"}],ORIENTATION_FLIP_H:[{type:0,value:"Voltear (H)"}],ORIENTATION_FLIP_V:[{type:0,value:"Voltear (V)"}],ADJUSTMENTS_BRIGHTNESS:[{type:0,value:"Brillo"}],ADJUSTMENTS_CONTRAST:[{type:0,value:"Contraste"}],ADJUSTMENTS_SATURATION:[{type:0,value:"Saturación"}],ADJUSTMENTS_EXPOSURE:[{type:0,value:"Exposición"}],ADJUSTMENTS_SHADOWS:[{type:0,value:"Sombras"}],ADJUSTMENTS_HIGHLIGHTS:[{type:0,value:"Luces"}],ADJUSTMENTS_CLARITY:[{type:0,value:"Nitidez"}],ADJUSTMENTS_GAMMA:[{type:0,value:"Gamma"}],CROP_CUSTOM:[{type:0,value:"Personalizado"}],CROP_SQUARE:[{type:0,value:"Cuadrado"}],CROP_4_3:[{type:0,value:"4:3"}],CROP_16_9:[{type:0,value:"16:9"}],CROP_NONE:[{type:0,value:"Ninguno"}],CROP_ROTATION:[{type:0,value:"Rotación"}],FOCUS_RADIAL:[{type:0,value:"Radial"}],FOCUS_LINEAR:[{type:0,value:"Lineal"}],FOCUS_BLUR_RADIUS:[{type:0,value:"Radio desenfocado"}],FOCUS_NONE:[{type:0,value:"Ninguno"}],FILTERS_INTENSITY:[{type:0,value:"Intensidad"}],FILTERS_CATEGORIES_ALL:[{type:0,value:"TODO"}],FILTERS_CATEGORIES_RETRO:[{type:0,value:"RETRO"}],FILTERS_CATEGORIES_BW:[{type:0,value:"Blanco y negro"}],FILTERS_CATEGORIES_SUMMER:[{type:0,value:"Verano"}],FILTERS_CATEGORIES_WINTER:[{type:0,value:"Invierno"}],FILTERS_CATEGORIES_SPECIAL:[{type:0,value:"Especial"}],STICKERS_BRIGHTNESS:[{type:0,value:"Brillo"}],STICKERS_CONTRAST:[{type:0,value:"Contraste"}],STICKERS_SATURATION:[{type:0,value:"Saturación"}],STICKERS_BLUR:[{type:0,value:"Desenfocado"}],STICKERS_FLIP:[{type:0,value:"Voltear"}],STICKERS_FLIP_V:[{type:0,value:"Voltear (V)"}],STICKERS_FLIP_H:[{type:0,value:"Voltear (H)"}],STICKERS_TO_FRONT:[{type:0,value:"Al frente"}],STICKERS_CATEGORIES_ALL:[{type:0,value:"Todo"}],STICKERS_CATEGORIES_GLASSES:[{type:0,value:"Lentes"}],STICKERS_CATEGORIES_HATS:[{type:0,value:"Sombreros"}],STICKERS_CATEGORIES_BEARDS:[{type:0,value:"Barbas"}],STICKERS_CATEGORIES_MISC:[{type:0,value:"Varios"}],BRUSH_THICKNESS:[{type:0,value:"Grosor"}],BRUSH_COLOR:[{type:0,value:"Color"}],WEBCAM_TAKE_PHOTO:[{type:0,value:"¡Toma una foto!"}],EDITOR_EDIT_PHOTO:[{type:0,value:"Editar foto"}],EDITOR_NEW:[{type:0,value:"Nuevo"}],EDITOR_PHOTO_ROLL:[{type:0,value:"Galería"}],EDITOR_UNDO:[{type:0,value:"Deshacer"}],EDITOR_EXPORT:[{type:0,value:"Guardar"}],EDITOR_ZOOM:[{type:0,value:"Acercar/alejar"}],SPLASH_UPLOAD:[{type:0,value:"Carga tu imagen"}],SPLASH_UPLOAD_DESCRIPTION:[{type:0,value:"Carga una foto de tu biblioteca o arrástrala y suéltala"}],SPLASH_WEBCAM:[{type:0,value:"Cámara web"}],SPLASH_WEBCAM_DESCRIPTION:[{type:0,value:"Toma una foto con tu cámara web o tu teléfono"}],SPLASH_STOCK:[{type:0,value:"Imágenes sin derechos de autor"}],SPLASH_STOCK_DESCRIPTION:[{type:0,value:"Selecciona entre miles de fotos sin derechos de autor"}],STOCK_SEARCH:[{type:0,value:"Busca fotos"}],STOCK_SEARCH_RESULTS:[{type:0,value:"Resultados de la búsqueda de "},{type:1,value:"query"}],BUTTONS_BACK:[{type:0,value:"Atrás"}],BUTTONS_CANCEL:[{type:0,value:"Cancelar"}],BUTTONS_COLOR:[{type:0,value:"Color"}],LOADING_RESIZING:[{type:0,value:"Cambiando tamaño..."}],LOADING_EXPORTING:[{type:0,value:"Guardando..."}],LOADING_LOADING:[{type:0,value:"Cargando..."}],WARNINGS_RESIZED:[{type:0,value:"Se cambió el tamaño de la imagen"}],WARNINGS_MAX_SIZE:[{type:0,value:"Tu imagen supera el tamaño máximo de "},{type:1,value:"maxMegaPixels"},{type:0,value:" megapíxeles, por lo que se cambió su tamaño a "},{type:1,value:"width"},{type:0,value:"×"},{type:1,value:"height"},{type:0,value:" píxeles."}],WARNINGS_LIMIT_SIZE:[{type:0,value:"Debido a limitaciones de hardware, se cambió el tamaño de tu imagen a "},{type:1,value:"width"},{type:0,value:"×"},{type:1,value:"height"},{type:0,value:" píxeles."}],ERRORS_LOADING:[{type:0,value:"No se pudo cargar la imagen"}],ERRORS_LOADING_MESSAGE:[{type:0,value:"No se pudo cargar la imagen en "},{type:1,value:"path"}],ERRORS_WEBCAM_UNAVAILABLE:[{type:0,value:"La cámara web no está disponible"}],ERRORS_WEBCAM_UNAVAILABLE_MESSAGE:[{type:0,value:"No se puede mostrar la imagen de la cámara web (Error: "},{type:1,value:"error"},{type:0,value:")"}],ERRORS_WEBCAM_NOT_SUPPORTED:[{type:0,value:"La cámara web no es compatible"}],ERRORS_WEBCAM_NOT_SUPPORTED_MESSAGE:[{type:0,value:"La función de la cámara web no es compatible con tu navegador."}],ERRORS_RENDER:[{type:0,value:"Error durante el procesamiento"}],ERRORS_RENDER_MESSAGE:[{type:0,value:"Ocurrió un error al procesar la imagen."}],ERRORS_BROWSER:[{type:0,value:"Ocurrió un error"}],ERRORS_BROWSER_MESSAGE:[{type:0,value:"Tu navegador demoró demasiado para procesar la imagen. Prueba aplicando menos operaciones."}],ERRORS_BROWSER_MULTIPLE_MESSAGE:[{type:0,value:"Tu navegador demoró demasiado para procesar la imagen. Prueba aplicando menos operaciones."}],ERRORS_STICKERS_LOAD:[{type:0,value:"No se pudieron cargar los stickers"}],RETRY_DIALOG_MESSAGE:[{type:0,value:"Esto está tardando más de lo habitual. ¿Quieres guardar los cambios y volver a intentarlo?"}],SAVE_PHOTO:[{type:0,value:"Guardar esta foto"}],IMAGE_TOO_LARGE:[{type:0,value:"Lo sentimos, pero no se puede editar esta imagen porque es muy grande. Vuelve a intentarlo con una imagen de menos de 50 megapíxeles."}],NO_ORIGINAL_PHOTO:[{type:0,value:"No se pudo obtener la foto original. Vuelve a intentarlo."}],CROSS_PLATFORM_EDIT_WARNING:[{type:0,value:"Esta foto se editó por última vez en un dispositivo móvil. Si decides reemplazar esta foto, ya no podrás deshacer las ediciones que hayas hecho hasta el momento en tu dispositivo móvil."}],SAVE:[{type:0,value:"Guardar una copia nueva"}],EDIT:[{type:0,value:"Editar"}],NO_VIDEOS_IN_EDITOR:[{type:0,value:"Los videos no se pueden editar con el editor de fotos de Flickr"}],ERROR:[{type:0,value:"Se produjo un error con el editor de fotos. Vuelve a intentarlo."}],FLICKR_PHOTO_EDITOR:[{type:0,value:"Editor de fotos de Flickr"}],CATEGORY_SHAPES:[{type:0,value:"Formas"}],CATEGORY_FOOD:[{type:0,value:"Comida y bebidas"}],CATEGORY_FUN:[{type:0,value:"Cosas divertidas"}],CATEGORY_WEAR:[{type:0,value:"Ropa y accesorios"}],STICKER_SQUARE_OUTLINE:[{type:0,value:"Contorno cuadrado"}],STICKER_CIRCLE_OUTLINE:[{type:0,value:"Contorno circular"}],STICKER_ARROW:[{type:0,value:"Flecha"}],STICKER_TRIANGLE_OUTLINE:[{type:0,value:"Contorno triangular"}],STICKER_LIGHTNING:[{type:0,value:"Iluminación"}],STICKER_X:[{type:0,value:"X"}],STICKER_HEART:[{type:0,value:"Corazón"}],STICKER_STAR:[{type:0,value:"Estrella"}],STICKER_BACON:[{type:0,value:"Tocino"}],STICKER_BANANA:[{type:0,value:"Plátano"}],STICKER_BUBBLE_TEA:[{type:0,value:"Té de burbujas"}],STICKER_CAN:[{type:0,value:"Lata"}],STICKER_CHERRY:[{type:0,value:"Cereza"}],STICKER_COFFEE:[{type:0,value:"Café"}],STICKER_HOT_SAUCE:[{type:0,value:"Salsa caliente"}],STICKER_ICE:[{type:0,value:"Hielo"}],STICKER_LOLLIPOP:[{type:0,value:"Paleta"}],STICKER_MUSHROOM:[{type:0,value:"Hongo"}],STICKER_POPCORN:[{type:0,value:"Palomitas"}],STICKER_ROOTBEER:[{type:0,value:"Cerveza de raíz"}],STICKER_SPORK:[{type:0,value:"Tenedor-cuchara"}],STICKER_BUBBLE_BLUE:[{type:0,value:"Burbuja azul"}],STICKER_BUBBLE_PINK:[{type:0,value:"Burbuja rosa"}],STICKER_DIAMOND:[{type:0,value:"Diamante"}],STICKER_DICE:[{type:0,value:"Dado"}],STICKER_FIRE:[{type:0,value:"Fuego"}],STICKER_FLAMINGO:[{type:0,value:"Flamenco"}],STICKER_FLOWER_ROSE:[{type:0,value:"Rosa"}],STICKER_FLOWER_TULIP:[{type:0,value:"Tulipán"}],STICKER_GIFT_BOX:[{type:0,value:"Caja de regalo"}],STICKER_MONEYBAG:[{type:0,value:"Bolsa de dinero"}],STICKER_RAINBOW:[{type:0,value:"Arcoíris"}],STICKER_SKULL:[{type:0,value:"Calavera"}],STICKER_TICKET:[{type:0,value:"Boleto"}],STICKER_BOBBLES:[{type:0,value:"Antenas"}],STICKER_CROWN:[{type:0,value:"Corona"}],STICKER_GLASSES_RAYBAND:[{type:0,value:"Lentes de diseñador"}],STICKER_GLASSES_SPARKLE:[{type:0,value:"Lentes brillantes"}],STICKER_GOOGLY_EYE:[{type:0,value:"Ojos saltones"}],STICKER_LIPS:[{type:0,value:"Labios"}],STICKER_MUSTACHE:[{type:0,value:"Bigotes"}],STICKER_PARTY_HAT_STARS:[{type:0,value:"Sombrero para fiestas con estrellas"}],STICKER_PARTY_HAT_STRIPES:[{type:0,value:"Sombrero para fiestas con rayas"}],STICKER_TONGUE:[{type:0,value:"Lengua"}],STICKER_VIKING:[{type:0,value:"Casco de vikingo"}],SELECTIVE_BLUR_RADIUS:[{type:0,value:"Radio desenfocado"}],SELECTIVE_BLUR_THICKNESS:[{type:0,value:"Grosor"}],FRAME_NONE:[{type:0,value:"Sin marco"}],FRAME_SCALE:[{type:0,value:"Escala"}],V4_CHANGES_YES:[{type:0,value:"Sí"}],V4_CHANGES_NO:[{type:0,value:"No"}],V4_KEEP_CHANGES:[{type:0,value:"Guardar cambios"}],V4_DISCARD:[{type:0,value:"Descartar cambios"}],V4_IMAGE_RESIZED:[{type:0,value:"Se modificó el tamaño de esta imagen"}],V4_ERROR_FONT:[{type:0,value:"Error al cargar la tipografía"}],V4_DISCARD_CHANGES:[{type:0,value:"¿Descartar cambios?"}],V4_CHANGES_LOST:[{type:0,value:"Se perderá cualquier cambio que no se haya guardado. ¿Continuar?"}],V4_ERROR_LOADING_FONTS:[{type:0,value:"No se pudieron cargar las siguientes tipografías: $fonts@."}],V4_TRANSFORM_TOOL:[{type:0,value:"Transformar"}],V4_LOCK_RESOLUTION:[{type:0,value:"Fijar resolución"}],V4_RESET:[{type:0,value:"Reestablecer valores predeterminados"}],V4_WIDTH_UNIT:[{type:0,value:"ancho"}],V4_HEIGHT_UNIT:[{type:0,value:"largo"}],V4_BASIC_ADJUSTMENTS:[{type:0,value:"Lo básico"}],V4_REFINEMENTS:[{type:0,value:"Ajustes"}],V4_WHITES:[{type:0,value:"Blancos"}],V4_BLACKS:[{type:0,value:"Negros"}],V4_TEMPERATURE:[{type:0,value:"Temperatura"}],V4_SHARPNESS:[{type:0,value:"Nitidez"}],V4_MIRRORED_BLUR:[{type:0,value:"Invertir imagen"}],V4_GAUSSIAN_BLUR:[{type:0,value:"Distribución de Gauss"}],V4_TEXT_SPACING:[{type:0,value:"Espaciamiento"}],V4_TEXT_LINE:[{type:0,value:"Línea"}],V4_TEXT_EDIT:[{type:0,value:"¡Haz doble clic para editar!"}],V4_TEXT_DESIGN:[{type:0,value:"Diseño de texto"}],V4_TEXT:[{type:0,value:"Texto"}],V4_TEXT_MASK:[{type:0,value:"Texto como máscara"}],V4_TEXT_NEW:[{type:0,value:"Nuevo diseño de texto"}],V4_OPACITY:[{type:0,value:"Opacidad"}],V4_ERROR_STICKER:[{type:0,value:"Hubo un error al cargar la pegantina."}],V4_REPLACE:[{type:0,value:"Reemplazar"}],V4_STICKER_NEW:[{type:0,value:"Nueva pegantina"}],V4_FILL:[{type:0,value:"Llenar"}],V4_BRUSH_WIDTH:[{type:0,value:"Ancho"}],V4_BRUSH_HARDNESS:[{type:0,value:"Dureza"}],V4_BRUSH_SETTINGS:[{type:0,value:"Ajustes de brocha"}],V4_NOTHING_SELECTED:[{type:0,value:"Ninguno"}],V4_ART_FILTERS:[{type:0,value:"Filtros artísticos"}],OPEN_PHOTO_EDITOR:[{type:0,value:"Abrir el editor de fotos"}]})}),"@VERSION@",{requires:["intl"]});